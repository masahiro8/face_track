(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{100:function(t,e,a){t.exports={List:"uThst4IvgrclNdKKirhKm",ListItem:"_1eUPmp4sFlGnA9iR6Z2yA0",Save:"_32Sa-LcM3vqu_cVGP-8nv5"}},127:function(t,e,a){t.exports={List:"_17OjsATFS6zIy16TMy7zqq",ListItem:"_30OCCDeljyP59MV9Um1PQS"}},128:function(t,e,a){t.exports={Header:"_1_1R8koVt7QLbrCdGtt2l0",HeaderItem:"_1eoswoDnCHUentPP5rEtLr"}},261:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAQAAABIkb+zAAABl0lEQVR4Ae3YIUiDYRCH8VPQiXzai7OI2ntVQexJzNq1f00sqlHRntSNdVxPW4cN2YzKWDFtj30w9r1zujv4/3p54MLdmYiIiIiMxwYX1Onx13KbPTJeGZLAVQIlmgAQNIEHgLAJbDGAwAlcAgROoAGhE/iG0AmMsBlLSAgaAHn0AMijB0AePQDy6AGQRw+APHoA5NEDmEOAAhSgAAUowIFwAQpQgAIUoAAFKEABClCAAj555JBdMtbY4YhHvuIEvHPKko1gmVM6EQIqrNgYrPDsPeDOJuDGc0CNBZuABapeA7qsWgGs0vUZcGIFceIxoM2iFcQiLX8BN5aAW38BB5aAfX8B25aAbX8B65aAdX8BmSUgm3mARmjfErDnL+DaEnDtL6BtCWj5C4BjK4jj6Mvch88AqBZap2uxD5rb2CdlJcZRf8aSjaDEGZ1Ib5UnjthlbX5vlT6e9C0VDTxpWiqu8OTKUrHJAC8GlC0d93jxYNOgRAMPmpRsOmS8MGSehryQ2W9Q5pw6Pf5bjzfOKZuIiIiIjPUDoNPYrFKF/TUAAAAASUVORK5CYII="},262:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAQAAABIkb+zAAACuklEQVR4Ae3WA7AlVxSF4dXzYtu2XYht27ZZjJNCbNsc27btwtjmU/9j47R736n+yjzYVCGoQqFQKBQKBbbhAl6nGbMBmMsI2vEvH/MIuykEducRfqYfVawwi2a8xgVsrXRQxlX8Tzkb4tOBe9lCDmzJPXTCZ0PK+Z8rKVOS2II3mEQQk3lpw49gT95mMkFM4g22UDI4kcGEMZortQ425xPKCWMwJyo+nqSC8L5kK62GI+hPeAt5SnGwJbWIajAHazlOYyZR1WLL6NfvQRyzuViLcQkLiKN7xCfwD3GVcwEXUE5cfyk8XiIJC1hAEl5SOFxANZZUc6GCowbDsKY/NRQU92LRfQqGzRmDRaMDzmbuwap7FAT1saq+3NiOcqwqZzu5cCWWXSEX3sey9+VCAyyrLxcGY9kQuTAVy6bKhXIsWygXFpb6AyZj2US5MALLhsqFdljWWC58VeqD7HEsu0suHIRlu8mNgVjVW0HwJla9qSA4GB+LfA5UMLTColYKimux6DIFhcdArOmsMLgJa05VOHTDkl8VFifhY8U89wCzvRU9pyjYisFY0AlP0XAY88jbXA6Qm+FudIPi4Uvy9KXiYnO6kZfubK742Isx5GEseyoZHM0ssjaLo5QcLqKKLFVyoZLF/WSnmuuUPN4lGz53Kw14/E0WnlRaKMvgCa8pTXj8Spo+V9rw+I60fKcs4PEVafgOT1nhK/u/78DHJOljZY9XSMorygcP4xOXz8PKD7dTTRyV3K58cS0VRFXB5cofFzKfKOZzoWzgTGYT1mzOkB0cywTCmMCxsoX9GElQQ9lP9rAL3QiiGzvKJramNS6t2Vp2sTm12JhabC7b8PiFDfkFT6WAN1ifN1Q6eByf1fk8IMscK0YF16r0cC7zAJjNuSpNnMRkJnOsSheHcqAKhUKhUChsshYBRZ3Amgr4pRAAAAAASUVORK5CYII="},263:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAQAAABIkb+zAAACTUlEQVR4Ae3aNXbdUBSF4VOFxhCo7FmYsQy2oXE4TZhpCMY6zEkXbMLRFMIcqfvDKEdrF/c+n7OWvhnsh7q/ZKm1Wi2W0sc2zvEWwGJhmFlK/mBx0McdaiwGujkFEHQAmygh7AAO0MC84ygEHsAOCDyAdRB4ACt4F3vANQg8gPUQe8CD0AMYgtgDZkIPYBll7AFjEHvA3ugDTkUfUEQf8CL6gKodUC8YP73hHBP0s9jy4RkytWDUlMwyZHnwBFlDwVDcoc/S4yQytWA0OE23oz+yesEQfGSzpcQ4Mq1gCA6krZ8lIrVgCI5aOkwj0guGYIelwiAivWBINnT+SKkXDMVbVqZsQgK9YIiuWSqcR1ArGH4+RqxSwxYPSOleh9MiQ6Q2bKmwSxgwQ2ozlg7HaKYXDF3Jso7d4GCMHMYsJbbwkf/ZSw77LC26OMn8TpHDKUuPXm5QV5BDYXkwUjsmviCHF7kfNZjgLG8AqMihEkpDEpXL0oDumcvSgK5wWRrQnXRZGtDtc1ka0I17LA26kmUeS4NuysxjadANmfkrDboH9oW/0qBbb194Kw26i/aNr9Kge8cq+8ZXadCtsR88lQbdTvvFT2nQHbc/eCkNuiP2Fw+lQfeBrfYPB6VBdoouq/FQGhQ36LV5eSsNdZ+Yazom+iwNAK+1gzq6yhZWO+BZ9AFF9AEnow/YF33AeOwBJctiD5gyn1ANxR7wwLxCsz72gIvml14wnNILhlN6wXBKLxhO6QXDKb1gOKUXDKf0guGUXjCcqhWMpFqt1mefsRYz20BHUgAAAABJRU5ErkJggg=="},264:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAQAAABIkb+zAAAAs0lEQVR4Ae3PMRGDQAAF0eto0EBMIoAWCYkILCQSwAlDDxsLycC/odhVsK9ckZmZmZkx8GvD/ffzhPx+npDfvxOBygkQcC4BAgRkMjPCCRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAg4EYAAQIECBAgQICAjWRbHjCTbMkDRpKNecCDnVQ7XcnHk1SvUiMaZhItNKVOtEwcXNnBRFtqRkfPh5Wzrbzp6YqZmZmZ/d0XPSYAGSNVNd8AAAAASUVORK5CYII="},265:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAQAAABIkb+zAAAEmklEQVR4Ae3bQ7zkWBTH8dPPao9t27Z345m2bdtejW3b2rdt1Gvbtuo3numTynvBza2qRb77wsnnn+TiXIlFJxaLxWKcz2N04QV+YDKL2MARDrCRBJP5gRfowmOcK9mIMurwNivxYwXv8AxVJVtwJa+yl6B28zpXSWaRz7NMwMQE6pAvmUBNBrCRKKxnIDUlnahCE7YSpc00pYqkB5cxGRsmc5nYx2Psw5Z9PCY2kcNwvBxiHG/QmYe5mtMpopjTuIpH6MzrjOMQXkZYixJF/EhlyhnM3RR6fMddDKacyvxEkUSP45lKRXYwkiskAC5nFDuoyFRqSbQ4hxW4W0l7SiQESmnHKtwt4RyJDiezCjdJXqXUcAjyKu5WcUp04SnHzRrukQhwD6twk+AEMUcRM3HzNdUkIlTnc9zMpEhM8ZJrdNpJxOhAklQviRnuI1WSBmIBTVxLeEDC4zg2k6q5WEILUm3iOAmLD0nVUyyiF6k+kHC4i1QvimU8T6q7JTjyWIbTb1RJw1D9F5yWki9B0QancsrSNL9O4NQm+PVfh5b0N9rhPYrFEFeRRFtOngRBY5zeEF+ABVwshngTp0YSBAm0nRznuwDYRx3j4ctOtIT4x504DRKf+IdplBiE0x3iFx+g7aZG0AJMo0QNdod8H1DKAbQx4hv/MI8SY9D2+xy68zhO5wQvwDxKnIfT4+IHL6LNlABQzKLEzFDjAOai9TAowChKdEebK96ohdMVBgUYRYkrcKolXrgXbbsEgmIaJbah3Rt8DPSVQQHGUeJLtDbBh7ODjAswiBKD0J4XL/yGVse4AIMoUQftN/HCHLTrjQswiBLXo80RL6xAO9u4AIMocTbaiuD3/XHGBRhEiePRtokXkmhFxgUYRIkitKPihYNoBVYL8JimUIB2ULywJasidBzaFvHC8jTdxB+HuomXB3+M3mChgL00svcY/Q2tbkZfZHXRfhUvvIA2RAIxjo7C0OBDiXYWBnMqOkaDubbihQeyaji9He1+8UJtSxOajyOZ0JSJN2ajdZcADKOj0A1ttvjBC2jTMjapn472QlqWVQyio3BO2GWVUvajjRbfjKKjMBrtAKXiD+9l5dLie+IXd+A0WHxS0THAEJxuN1terym+6OgYXP8daAnTDY7X07rB8TpOjSUI8liLluQq8UFFJySuIIm2jjwJhnY4JdK2yVeOU7swPaGLcPqFHLGMHH7DaRF5Ehy3RNt8YdBccrOEwwek6iUW0du01UDhODaltdmjGak2c5yExwOkStJELKA5SVLdZ6fhqYNEjHZg5Z6jiBnWW86q8TVuZlAk5qhNAjdruFsiwN2swU2C2hINTqmw7fIV47bLl83bLk0bX9uGbHwtoQ2rcLeCc7O79fgKj9bj4zPR/L2EIZ7N38XczVCWUJkfKRI7qOKr/X48b9Dln/b7Eoo5/Z/2+zcYzyG8DKeK2MST7LV6AMI+LrF2BOUS8RYfAvoHNRlo+RiWfeRTl4mYmEhd8iWzuIrX2RPqKOLlki2oSh3eMj8Mmj3HcX/87zjuQTaSYAo/8iJdeIzzJTKxWCwWi/0OGaOdH89+l7kAAAAASUVORK5CYII="},266:function(t,e,a){t.exports={viewer:"_2jJlzIwcKi4BhGPBAPRaxa"}},269:function(t,e,a){t.exports=a(799)},274:function(t,e,a){},279:function(t,e){},281:function(t,e){},313:function(t,e){},314:function(t,e){},54:function(t,e,a){t.exports={viewerCanvas:"xQJ9UXXt3Gp6VtcIouN-a",overlayClickable:"P2Ozy3EA7iOKnUsuEd04Y",overlayCanvas:"_1VTjcrIdjUewwZ-qVkXQxP",overlayWeb3D:"_1i04iIxbpEXE3je7EydqW3",videoimage:"_27P8rrrUDhjUTuQVCNHvHs"}},799:function(t,e,a){"use strict";a.r(e);var n=a(3),s=a.n(n),i=a(260),r=a.n(i),o=(a(274),a(13)),c=a(17),l=a(20),u=a(18),h=a(19),p=a(44),d=a(11),m=a(22),f=a.n(m),v=a(41),A=(a(362),function(t,e,a){var n=t.getContext("2d");n.fillStyle=a||"#0ff",n.fillRect(e.x,e.y,4,4)}),y=function(t){function e(t){var a;return Object(o.a)(this,e),(a=Object(l.a)(this,Object(u.a)(e).call(this,t))).canvas=null,a.pointlog=null,a.net=new p.FaceLandmark68TinyNet,a.state={faceDetect:{}},a}return Object(h.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){var t=Object(v.a)(f.a.mark(function t(){var e=this;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.nets.tinyFaceDetector.load("models/face/");case 2:return t.next=4,p.loadFaceLandmarkModel("models/face/");case 4:console.log("load models"),setInterval(Object(v.a)(f.a.mark(function t(){return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.predict();case 2:case"end":return t.stop()}},t,this)})),this.props.interval);case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"predict",value:function(){var t=Object(v.a)(f.a.mark(function t(){var e,a;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.props.canvas){t.next=2;break}return t.abrupt("return");case 2:return 128,.5,e=new p.TinyFaceDetectorOptions({inputSize:128,scoreThreshold:.5}),t.next=7,p.detectSingleFace(this.props.video,e).withFaceLandmarks();case 7:(a=t.sent)&&(this.setState({faceDetect:a}),this.props.result(a));case 9:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){return s.a.createElement("div",null)}}]),e}(n.Component),g=a(54),b=a.n(g),w={width:640,height:480},x=Math.floor(1e3/30),E={nose:30,leftEye:38,rightEye:44},k=function(t){function e(t){var a;return Object(o.a)(this,e),(a=Object(l.a)(this,Object(u.a)(e).call(this,t))).media=null,a.selfRef=null,a}return Object(h.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){var t=Object(v.a)(f.a.mark(function t(){return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.initCam();case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"initCam",value:function(){var t=Object(v.a)(f.a.mark(function t(){var e,a=this;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.media=navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"user",width:this.props.size.width}}),e=new Promise(function(t){a.media.then(function(e){a.selfRef.srcObject=e,a.selfRef.onloadedmetadata=function(e){t()}}),a.media.catch(function(t){alert(t)})}),t.abrupt("return",e);case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this;return s.a.createElement("video",{ref:function(e){t.selfRef=e,t.props.setSelf(e)},className:"video",autoPlay:!0,playsInline:!0,width:w.width,height:w.height})}}]),e}(n.Component),O=function(t){function e(t){var a;return Object(o.a)(this,e),(a=Object(l.a)(this,Object(u.a)(e).call(this,t))).canvas=null,a}return Object(h.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){var t=this;setInterval(function(){t.draw()},this.props.interval)}},{key:"draw",value:function(){if(this.props.video&&this.props.canvas){this.props.video.getBoundingClientRect();var t=this.canvas.getContext("2d");this.canvas.width=this.props.size.width,this.canvas.height=this.props.size.height,t.drawImage(this.props.video,0,0,this.props.size.width,this.props.size.height)}}},{key:"render",value:function(){var t=this;return s.a.createElement("canvas",{ref:function(e){t.canvas=e,t.props.set(e)},id:"canvas",className:"canvas"})}}]),e}(n.Component),R=function(t){function e(t){var a;return Object(o.a)(this,e),(a=Object(l.a)(this,Object(u.a)(e).call(this,t))).state={video:null,canvas:null},a}return Object(h.a)(e,t),Object(c.a)(e,[{key:"setVideo",value:function(t){this.state.video!==t&&t&&(this.setState({video:t}),this.props.video(t))}},{key:"setCanvas",value:function(t){this.state.canvas!==t&&t&&(this.setState({canvas:t}),this.props.canvas(t))}},{key:"render",value:function(){var t=this;return s.a.createElement("div",{className:b.a.videoimage},s.a.createElement(k,{size:this.props.size,setSelf:function(e){t.setVideo(e)}}),s.a.createElement(O,{size:this.props.size,video:this.state.video,set:function(e){t.setCanvas(e)},interval:this.props.interval}))}}]),e}(n.Component),S=(a(798),function(){function t(){Object(o.a)(this,t),this.isPlay=!1,this.time_total=null,this.time_start=null,this.time_interval=null,this.time_current=null,this.time_prev=null,this.delegate=[],this.init()}return Object(c.a)(t,[{key:"init",value:function(){}},{key:"update",value:function(){this.isPlay&&(this.setCurrent(),this.checkCallback(this.time_total)),window.requestAnimationFrame(this.update.bind(this))}},{key:"checkCallback",value:function(t){if(this.delegate.length){var e=d.filter(this.delegate,function(e){return e.time==Math.floor(t/1e3)});this.delegate=d.reject(this.delegate,function(e){return e.time==Math.floor(t/1e3)}),d.each(e,function(t){t.callback()})}}},{key:"start",value:function(){this.time_total=0,this.restart(),this.update()}},{key:"restart",value:function(){this.time_start=(new Date).getTime(),this.time_current=(new Date).getTime(),this.time_prev=(new Date).getTime(),this.time_interval=0,this.isPlay=!0}},{key:"pause",value:function(){this.isPlay=!1}},{key:"setCurrent",value:function(){var t=(new Date).getTime();this.time_current=t-this.time_start,this.time_interval=t-this.time_prev,this.time_total+=this.time_interval,this.time_prev=t}},{key:"setCallback",value:function(t){this.delegate.push({time:t.time,callback:t.callback})}}]),t}()),C=(Math.cos,Math.sin,Math.abs,Math.PI,Math.floor);Math.random;function j(){this.a=[],this.b=[],this.c=[],this.d=[],this.num=0}j.prototype={constructor:j,num:0,a:null,b:null,c:null,d:null,init:function(t){var e,a,n=[];this.num=t.length-1;var s=this.num,i=this.a,r=this.b,o=this.c,c=this.d;for(a=0;a<=s;a++)i[a]=t[a];for(o[0]=o[s]=0,a=1;a<s;a++)o[a]=3*(i[a-1]-2*i[a]+i[a+1]);for(n[0]=0,a=1;a<s;a++)e=4-n[a-1],o[a]=(o[a]-o[a-1])/e,n[a]=1/e;for(a=s-1;a>0;a--)o[a]=o[a]-o[a+1]*n[a];for(r[s]=c[s]=0,a=0;a<s;a++)c[a]=(o[a+1]-o[a])/3,r[a]=i[a+1]-i[a]-o[a]-c[a]},culc:function(t){var e,a=C(t),n=this.num,s=this.a,i=this.b,r=this.c,o=this.d;return a<0?a=0:a>=n&&(a=n-1),e=t-a,s[a]+(i[a]+(r[a]+o[a]*e)*e)*e}};var T=function(){function t(){Object(o.a)(this,t)}return Object(c.a)(t,[{key:"init",value:function(t){this.local={pos:{x:0,y:0},rot:0},this.img=t}},{key:"getCtx",value:function(){return this.canvas.getContext("2d")}},{key:"setCanvas",value:function(t){return this.canvas=t,this.ctx=t.getContext("2d"),this}},{key:"transform",value:function(t,e){this.move(t).rotate(e).emit()}},{key:"move",value:function(t){return this.local.pos=t,this}},{key:"rotate",value:function(t){return this.local.rot=t,this}},{key:"emit",value:function(){var t=this.getCtx();t.save();var e=this.local.rot,a=this.local.pos,n=a.x+this.img.width/2,s=a.y+this.img.height/2;return t.setTransform(Math.cos(e),Math.sin(e),-Math.sin(e),Math.cos(e),n-n*Math.cos(e)+s*Math.sin(e),s-n*Math.sin(e)-s*Math.cos(e)),t.drawImage(this.img,a.x,a.y),t.restore(),this}}]),t}(),P=function(t){function e(t,a,n){var s;return Object(o.a)(this,e),(s=Object(l.a)(this,Object(u.a)(e).call(this,a))).value=t,s.scheduler=n,s.isPlay=!0,s.frame=0,s.schedule=new S,s.init(a),s.makeFrames(),s.makeSplineFrames(),s.update(),s}return Object(h.a)(e,t),Object(c.a)(e,[{key:"getImageSrc",value:function(){return this.sprite.value.src}},{key:"update",value:function(){window.requestAnimationFrame(this.update.bind(this)),this.playAnims()}},{key:"playAnims",value:function(){this.frame>=this.value.splineFrames.length?this.frame=0:this.frame++}},{key:"makeSplineFrames",value:function(){var t=this.value.anim,e=[];t.map(function(a,n){if(t[n+1]){var s=60*(t[n+1].time-t[n].time),i=Array.apply(null,new Array(s)).map(function(e,a){var i=function(t,e,a,n){return t+(e-t)/a*n}(t[n].rot,t[n+1].rot,s,a);return{rot:Math.floor(i)}});e=e.concat(i)}}),1==t.length&&(e[0]={rot:t[0].rot});var a=[],n=[];t.map(function(t){a.push(t.pos.x),n.push(t.pos.y)});var s=new j,i=new j;s.init(a),i.init(n),this.value.splineFrames=[];var r=0;t.map(function(e,a){if(t[a+1]){var n=t[a+1].time-t[a].time;r+=60*n}a++});var o=Array.apply(null,Array(r)).map(function(e,a){var n=((t.length-1)/r*a).toFixed(2);return{index:a,pos:{x:s.culc(n),y:i.culc(n)}}});this.value.tiltFlag&&o.reverse(),this.value.splineFrames=o.map(function(t,a){return{index:t.index,pos:t.pos,rot:e[a].rot}})}},{key:"makeFrames",value:function(){var t=this,e=function(t,e,a,n){return(e-t)/a*n};this.value.frames=[],d.each(this.value.anim,function(a,n){if(t.value.anim[n+1]){var s=60*(t.value.anim[n+1].time-t.value.anim[n].time),i=new Array(s),r=d.map(i,function(a,i){return{index:i,pos:{x:e(t.value.anim[n].pos.x,t.value.anim[n+1].pos.x,s,i),y:e(t.value.anim[n].pos.y,t.value.anim[n+1].pos.y,s,i)}}});t.value.frames=t.value.frames.concat(r)}else t.value.frames.push({index:1,pos:t.value.anim[n].pos})})}},{key:"transform",value:function(t,e,a){var n,s=e;n=this.localMove(t,a),s=this.localRotate(e),this.value.tiltFlag||(s=180*Math.PI/180),this.move(n).rotate(s).emit()}},{key:"localMove",value:function(t,e){if(!d.has(this.value,"frames")||!this.value.splineFrames[this.frame])return t;var a=this.value.splineFrames[this.frame].pos,n=Math.cos(e)*a.x+Math.sin(e)*a.y,s=-1*Math.sin(e)*a.x+Math.cos(e)*a.y;return this.value.tiltFlag?{x:t.x+n,y:t.y+s}:{x:t.x+a.x,y:t.y+a.y}}},{key:"localRotate",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return d.has(this.value,"anim")&&this.value.splineFrames[this.frame]&&d.has(this.value.splineFrames[this.frame],"rot")&&this.value.tiltFlag?t+this.value.splineFrames[e].rot:t}}]),e}(T),M=(new function t(){Object(o.a)(this,t)},function(t){function e(t){var a;return Object(o.a)(this,e),(a=Object(l.a)(this,Object(u.a)(e).call(this,t))).state={done:!1,progress:0,images:[],anies:[]},d.map(t.assets,function(t){a.loadImage(t)}),a}return Object(h.a)(e,t),Object(c.a)(e,[{key:"loadImage",value:function(t){var e=this;d.each(t.src,function(a){var n=new Image;n.onload=function(a){var s=e.state.images;if(s.push({id:t.id,image:n}),e.setState({progress:e.state.progress+1,images:s}),e.props.progress({result:e.state.progress,total:e.props.assets.length}),e.props.assets.length===e.state.progress){var i=d.map(e.state.images,function(t){var a=d.filter(e.props.assets,function(e){return e.id===t.id});return{id:t.id,sprite:new P(a[0],t.image,e.schedule)}});e.setState({done:!0,anies:i}),e.props.done()}},n.src=a})}},{key:"show",value:function(){return this.state.done?this.props.view(this.state.anies):null}},{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,this.show())}}]),e}(n.Component)),I=a(127),B=a.n(I),N=function(t){function e(t){return Object(o.a)(this,e),Object(l.a)(this,Object(u.a)(e).call(this,t))}return Object(h.a)(e,t),Object(c.a)(e,[{key:"GetMenu",value:function(t){var e=this;return d.map(t,function(t){return s.a.createElement(D,{id:t.id,src:t.sprite.value.src[0],callback:function(t){e.props.callback(t)}})})}},{key:"render",value:function(){var t=this;return s.a.createElement(M,{assets:this.props.assets,progress:function(t){},done:function(){},view:function(e){return s.a.createElement("div",{className:t.props.show?B.a.List+" show":B.a.List},t.GetMenu(e))}})}}]),e}(n.Component),D=function(t){var e=t.id,a=t.src,n=t.callback;return s.a.createElement("div",{className:B.a.ListItem,onClick:function(t){n(e)}},s.a.createElement("img",{src:a}))},z=a(56),Q=(a(800),a(100)),V=a.n(Q),F=a(261),K=a.n(F),_=a(262),L=a.n(_),U=a(263),Y=a.n(U),G=a(264),q=a.n(G),X=a(265),H=a.n(X),J={save:K.a,stamps:L.a,assets:Y.a,del:q.a,play:H.a},W=function(t){function e(t){var a;return Object(o.a)(this,e),(a=Object(l.a)(this,Object(u.a)(e).call(this,t))).state={data:[]},a.assets=t.assets,a.callback={save:a.saveAsset.bind(Object(z.a)(Object(z.a)(a))),load:a.loadAsset.bind(Object(z.a)(Object(z.a)(a))),delete:a.deleteAsset.bind(Object(z.a)(Object(z.a)(a)))},a}return Object(h.a)(e,t),Object(c.a)(e,[{key:"componentWillReceiveProps",value:function(t){JSON.stringify(t.assets)!==JSON.stringify(this.props.assets)&&(this.assets=t.assets)}},{key:"saveAsset",value:function(){var t=this,e=d.filter(this.assets,function(e){return e.id==t.props.currentAsset.assetId}),a=d.clone(this.props.currentAsset);a.id=parseInt(d.uniqueId()),a.src=e[0].src[0];var n=d.clone(this.state.data);n.push(a),this.setState({data:n})}},{key:"loadAsset",value:function(t){var e=d.filter(this.state.data,function(e){return e.id===t}),a=d.clone(e[0]);delete a.src,delete a.id,this.props.callback(a)}},{key:"deleteAsset",value:function(t){var e=d.filter(this.state.data,function(e){return e.id!==t});this.setState({data:e})}},{key:"getAssets",value:function(){var t=this;return d.map(this.state.data,function(e,a){return s.a.createElement(Z,{key:e.id,id:e.id,src:e.src,callback:t.callback})})}},{key:"render",value:function(){var t=this;return s.a.createElement("div",{className:t.props.show?V.a.List+" show":V.a.List},s.a.createElement("div",{className:V.a.Save},s.a.createElement("button",{onClick:function(e){t.saveAsset()}},s.a.createElement("img",{src:J.save}),s.a.createElement("p",{className:"label"},"\u4fdd\u5b58"))),this.getAssets())}}]),e}(n.Component),Z=function(t){var e=t.id,a=t.src,n=t.callback;return s.a.createElement("div",{className:V.a.ListItem},s.a.createElement("img",{src:a}),s.a.createElement("div",{className:"navi"},s.a.createElement("button",{onClick:function(){n.load(e)}},s.a.createElement("img",{src:J.play}),s.a.createElement("div",{className:"label"},"load")),s.a.createElement("button",{onClick:function(){n.delete(e)}},s.a.createElement("img",{src:J.del}),s.a.createElement("div",{className:"label"},"delete"))))},$=a(266),tt=a.n($),et=a(128),at=a.n(et),nt=function(t){return s.a.createElement("div",{className:at.a.Header},s.a.createElement("ul",null,d.map(t.menu,function(t){return s.a.createElement(st,{id:t.id,icon:J[t.icon],label:t.label,callback:t.callback,show:t.show})})))},st=function(t){return s.a.createElement("li",{className:t.show?at.a.HeaderItem+" show":at.a.HeaderItem,onClick:function(e){t.callback(e,t.id)}},t.children,s.a.createElement("img",{className:"icon",src:t.icon,alt:t.label}),s.a.createElement("p",{className:"label"},t.label))},it=[{id:1,type:"image",src:["./images/star_01.png"],tiltFlag:!0,anim:[{index:1,pos:{x:0,y:0},rot:0,scale:{x:1,y:1},time:0},{index:2,pos:{x:-100,y:100},rot:360,scale:{x:1,y:1},time:.5},{index:3,pos:{x:-100,y:200},rot:180,scale:{x:1,y:1},time:1},{index:4,pos:{x:100,y:0},rot:200,scale:{x:1,y:1},time:1.5},{index:5,pos:{x:-100,y:-200},rot:360,scale:{x:1,y:1},time:2},{index:6,pos:{x:0,y:100},rot:180,scale:{x:1,y:1},time:2.5},{index:7,pos:{x:0,y:0},rot:0,scale:{x:1,y:1},time:3}]},{id:2,type:"ani",src:["./images/arrow_left.png"],tiltFlag:!0,anim:[{index:1,pos:{x:0,y:0},rot:0,scale:{x:1,y:1},time:0},{index:2,pos:{x:10,y:0},rot:45,scale:{x:1,y:1},time:.5},{index:3,pos:{x:80,y:0},rot:90,scale:{x:1,y:1},time:1},{index:4,pos:{x:90,y:0},rot:95,scale:{x:1,y:1},time:1.5}]},{id:3,type:"ani",src:["./images/arrow_left.png"],tiltFlag:!1,anim:[{index:1,pos:{x:0,y:0},rot:0,scale:{x:1,y:1},time:0}]}],rt=a(161),ot=a.n(rt),ct=function(t,e){return{x:(e.x-t.x).toFixed(2),y:(e.y-t.y).toFixed(2)}},lt=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},ut=function(t,e){return t.x*e.x+t.y*e.y},ht=function(t,e){return t.x*e.y-e.x*t.y},pt=function(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},dt=function(t){return t.x/lt(t)},mt=function(t,e,a){var n={x:0,y:0},s=ct(t,e),i=ct(t,a),r=ht(s,{x:100,y:0}),o=Math.acos(dt(s))*(180/Math.PI),c=r<0?-o:o,l=ht(s,i),u=Math.abs(l/pt(n,s)),h=pt(n,i),p=Math.sqrt(h*h-u*u),d=pt(n,s);return{x:110*(u/d),y:100*(p/d-.5),z:c}},ft=function(t,e){return{x:.8*t.x+.2*e.x,y:.8*t.y+.2*e.y}},vt=function(t,e,a){var n={x:0,y:0},s=ct(e,a),i=ct(e,t.vector),r=ht(s,i),o=Math.abs(r/pt(n,s)),c=ut(s,i),l=function(t,e){var a=lt(t),n=lt(e);return Math.cos(ut(t,e)/(a*n))}(s,i),u=ot.a.acos(l)*lt(i),h=pt(n,s),p=u/h,d=o/h,m={};return m.bool={dot:!(c<0),cross:r<0},m.rate={dot:c<0?-p:p,cross:d},m},At=function(t){function e(t){var a;return Object(o.a)(this,e),(a=Object(l.a)(this,Object(u.a)(e).call(this,t))).canvas=null,a.tilt={x:null,y:null,z:null},a.deg=null,a.radian=null,a.star=null,a.BASE_PARTS=a.props.partsConfig.base,a.VECTOR_PARTS=a.props.partsConfig.vector,a.CENTER_PARTS=a.props.partsConfig.center,a.positions=Array.apply(null,new Array(68)),a.positions[a.VECTOR_PARTS]={x:0,y:0},a.positions[a.BASE_PARTS]={x:0,y:0},a.positions[a.CENTER_PARTS]={x:0,y:0},a.state={assetId:1,points:[{rate:{dot:.5,cross:0},bool:{dot:!0,cross:!1}}]},a}return Object(h.a)(e,t),Object(c.a)(e,[{key:"componentWillReceiveProps",value:function(t){var e=this;JSON.stringify(t.loadData)!==JSON.stringify(this.props.loadData)&&this.setState({assetId:t.loadData.assetId}),t.landmarks&&(this.clearCanvas(),this.props.positions?(this.positions[this.VECTOR_PARTS]=ft(this.props.positions[this.VECTOR_PARTS],t.positions[this.VECTOR_PARTS]),this.positions[this.BASE_PARTS]=ft(this.props.positions[this.BASE_PARTS],t.positions[this.BASE_PARTS])):(this.positions[this.VECTOR_PARTS]=t.positions[this.VECTOR_PARTS],this.positions[this.BASE_PARTS]=t.positions[this.BASE_PARTS]),this.tilt=function(t,e){var a=ct(t,e),n=ht(a,{x:100,y:0}),s=Math.acos(dt(a)),i=s*(180/Math.PI);return n<0?s:-i*(Math.PI/180)}(this.positions[this.VECTOR_PARTS],this.positions[this.BASE_PARTS]),(this.props.showEyes||this.props.editMode)&&this.drawPoints(),this.props.showPoints&&this.drawParts(),this.state.points.length&&d.each(this.state.points,function(t,a){console.log("point =  ",t),e.setPoint(t,a,e.positions[e.BASE_PARTS],e.positions[e.VECTOR_PARTS])}))}},{key:"setCanvas",value:function(t){this.canvas=t,this.props.setRef(t)}},{key:"addPoint",value:function(t){var e=this.canvas.getBoundingClientRect(),a=t.clientX-e.left,n=t.clientY-e.top,s=vt({vector:{x:a,y:n}},this.positions[this.BASE_PARTS],this.positions[this.VECTOR_PARTS]);console.log("rate =  ",s),s.assetId=this.state.assetId,this.props.editCallback(s);var i=this.state.points;i[0]=s,this.setState({points:i})}},{key:"setPoint",value:function(t,e,a,n){var s=this,i={x:0,y:0},r=ct(a,n),o=lt(r),c=pt(i,r)*t.rate.dot,l={x:i.x+r.x/o*c+a.x,y:i.y+r.y/o*c+a.y},u=d.filter(this.props.anies,function(t){return t.id==s.state.assetId});if(u.length){var h=u[0].sprite.img,p=l.x-h.width/2,m=l.y-h.height/2;u[0].sprite.setCanvas(this.canvas).transform({x:p,y:m},this.tilt,-this.tilt)}this.props.editMode&&A(this.canvas,{x:l.x,y:l.y},"rgba(255,255,255)")}},{key:"clearCanvas",value:function(){this.canvas.getContext("2d").clearRect(0,0,w.width,w.height)}},{key:"drawPoints",value:function(){var t=this,e=0;d.each(this.props.positions,function(a){e==t.BASE_PARTS&&A(t.canvas,{x:a.x,y:a.y},"rgba(255,0,0)"),e==t.VECTOR_PARTS&&A(t.canvas,{x:a.x,y:a.y},"rgba(0,255,0)"),e++})}},{key:"drawParts",value:function(){var t=this,e=this.props.landmarks,a=0,n=0,s=Math.floor(25.5);d.each(e,function(e,i){a++,n=0,e.map(function(e){n++,A(t.canvas,{x:e.x,y:e.y},function(t,e){return["rgb(255,".concat(e,",").concat(e,")"),"rgb(".concat(e,",255,").concat(e,")"),"rgb(".concat(e,",").concat(e,",255)"),"rgb(255,255,".concat(e,")"),"rgb(".concat(e,",255,255)"),"rgb(255,".concat(e,",255)"),"rgb(".concat(e,",").concat(e,",").concat(e,")")][t]}(a,n*s))})})}},{key:"render",value:function(){var t=this;return s.a.createElement("div",{className:b.a.viewerCanvas},s.a.createElement("canvas",{ref:function(e){t.setCanvas(e)},width:w.width,height:w.height,className:b.a.overlayCanvas,onClick:function(e){t.props.editable&&t.addPoint(e)}}))}}]),e}(n.Component),yt=a(6),gt=function(t){function e(){var t;Object(o.a)(this,e),t=Object(l.a)(this,Object(u.a)(e).call(this));var a=new yt.CubeGeometry(40,10,5),n=new yt.MeshLambertMaterial({color:16497669}),s=new yt.Mesh(a,n);return s.position.set(0,0,10),t.add(s),t}return Object(h.a)(e,t),e}(yt.Group),bt=(n.Component,yt.Group,function(t){function e(t){var a;return Object(o.a)(this,e),(a=Object(l.a)(this,Object(u.a)(e).call(this,t))).positions=[],a.positions[a.VECTOR_PARTS]={x:0,y:0},a.positions[a.BASE_PARTS]={x:0,y:0},a.positions[a.CENTER_PARTS]={x:0,y:0},a.tilt={},a.shift={x:-60,y:0,z:0},a.axis={x:new yt.Vector3(1,0,0).normalize(),y:new yt.Vector3(0,1,0).normalize(),z:new yt.Vector3(0,0,1).normalize()},a.transScale={x:.15,y:.13,z:1},a.BASE_PARTS=a.props.partsConfig.base,a.VECTOR_PARTS=a.props.partsConfig.vector,a.CENTER_PARTS=a.props.partsConfig.center,a.state={position:{},scale:1,quat:{x:new yt.Quaternion,y:new yt.Quaternion,z:new yt.Quaternion}},a}return Object(h.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(t){t.landmarks&&(this.positions=this.lowPathFilter(t),this.tilt=mt(this.positions[this.VECTOR_PARTS],this.positions[this.BASE_PARTS],this.positions[this.CENTER_PARTS]),this.quote(),this.translation())}},{key:"lowPathFilter",value:function(t){var e={};return this.props.positions?(e[this.VECTOR_PARTS]=ft(this.props.positions[this.VECTOR_PARTS],t.positions[this.VECTOR_PARTS]),e[this.BASE_PARTS]=ft(this.props.positions[this.BASE_PARTS],t.positions[this.BASE_PARTS]),e[this.CENTER_PARTS]=ft(this.props.positions[this.CENTER_PARTS],t.positions[this.CENTER_PARTS])):(e[this.VECTOR_PARTS]=t.positions[this.VECTOR_PARTS],e[this.BASE_PARTS]=t.positions[this.BASE_PARTS],e[this.CENTER_PARTS]=t.positions[this.CENTER_PARTS]),e}},{key:"quote",value:function(){var t={x:new yt.Quaternion,y:new yt.Quaternion,z:new yt.Quaternion};t.x.setFromAxisAngle(this.axis.x,yt.Math.degToRad(70-this.tilt.x)),t.y.setFromAxisAngle(this.axis.y,yt.Math.degToRad(this.tilt.y)),t.z.setFromAxisAngle(this.axis.z,yt.Math.degToRad(this.tilt.z)),t.y.multiply(t.x),t.z.multiply(t.y),this.setState({quat:t})}},{key:"translation",value:function(){if(this.positions[this.BASE_PARTS]&&this.positions[this.VECTOR_PARTS]){var t=this.positions[this.BASE_PARTS],e=this.positions[this.VECTOR_PARTS],a={x:0,y:0},n=ct(t,e),s=lt(n),i=pt(a,n),r=.5*i,o=a.x+n.x/s*r+t.x,c=a.y+n.y/s*r+t.y,l=this.props.size.width/2,u=this.props.size.height/2,h=i/100,p={x:(o-l)*this.transScale.x,y:(u-c)*this.transScale.y,z:0*this.transScale.z};this.setState({position:p,scale:h})}}},{key:"render",value:function(){return this.props.scene(this.state.position,this.state.quat,this.state.scale)}}]),e}(n.Component)),wt=a(267),xt=a.n(wt);a(268)(yt);var Et=function(t){function e(){var t;Object(o.a)(this,e),t=Object(l.a)(this,Object(u.a)(e).call(this));var a=new yt.CubeGeometry(40,10,5),n=new yt.MeshLambertMaterial({color:16497669}),s=new yt.Mesh(a,n);return s.position.set(0,0,10),t.add(s),t}return Object(h.a)(e,t),e}(yt.Group),kt=function(t){function e(t){var a;return Object(o.a)(this,e),(a=Object(l.a)(this,Object(u.a)(e).call(this,t))).state={model:null},a}return Object(h.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){var t=Object(v.a)(f.a.mark(function t(){var e;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.load();case 2:e=t.sent,this.setState({model:e});case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){return this.props.loaded(this.state.model)}},{key:"loadMatrial",value:function(){var t=Object(v.a)(f.a.mark(function t(e){return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t,a){(new xt.a).load(e,function(e){t(e)},function(t){},function(t){a(t)})}));case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"loadModel",value:function(){var t=Object(v.a)(f.a.mark(function t(e){var a=this;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t,n){a.THREE=yt,(new a.THREE.OBJLoader).load(e,function(e){t(e)},function(t){},function(t){n(t)})}));case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"loadTexture",value:function(){var t=Object(v.a)(f.a.mark(function t(e){var a=this;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t,n){a.THREE=yt,(new a.THREE.TextureLoader).load(e,function(e){t(e)},function(t){},function(t){n(t)})}));case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"load",value:function(){var t=Object(v.a)(f.a.mark(function t(){var e,a=this;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.props.model){t.next=2;break}return t.abrupt("return");case 2:return e=new Promise(function(){var t=Object(v.a)(f.a.mark(function t(e){var n,s,i;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.loadMatrial(a.props.model.mtl);case 2:return n=t.sent,t.next=5,a.loadModel(a.props.model.obj);case 5:return s=t.sent,t.next=8,a.loadTexture(a.props.model.tex);case 8:i=t.sent,n&&s&&i&&(s.traverse(function(t){t instanceof yt.Mesh&&(t.material.map=i)}),e(s));case 10:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()),t.abrupt("return",e);case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}]),e}(n.Component),Ot=function(t){function e(t){var a;return Object(o.a)(this,e),(a=Object(l.a)(this,Object(u.a)(e).call(this,t))).BASE_PARTS=a.props.partsConfig.base,a.VECTOR_PARTS=a.props.partsConfig.vector,a.CENTER_PARTS=a.props.partsConfig.center,a.positions=[],a.positions[a.VECTOR_PARTS]={x:0,y:0},a.positions[a.BASE_PARTS]={x:0,y:0},a.positions[a.CENTER_PARTS]={x:0,y:0},a.tilt={},a.shift={x:-60,y:0,z:0},a.axis={x:new yt.Vector3(1,0,0).normalize(),y:new yt.Vector3(0,1,0).normalize(),z:new yt.Vector3(0,0,1).normalize()},a.quat={x:new yt.Quaternion,y:new yt.Quaternion,z:new yt.Quaternion},a.transScale={x:.15,y:1,z:1},a.width=a.props.size.width,a.height=a.props.size.height,a.canvas=null,a.renderer=null,a.scene=null,a.light=null,a.persecamera=null,a.camera=null,a.controls=null,a.group=null,a.object=null,a.q=null,a}return Object(h.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){this.init(),this.camera.aspect=this.props.size.width/this.props.size.height,this.camera.updateProjectionMatrix(),this.render3D()}},{key:"componentWillReceiveProps",value:function(t){JSON.stringify(t.position)!==JSON.stringify(this.props.position)&&this.group.position.set(t.position.x,t.position.y,t.position.z),JSON.stringify(t.quat)!==JSON.stringify(this.props.quat)&&this.group.quaternion.copy(t.quat.z),JSON.stringify(t.scale)!==JSON.stringify(this.props.scale)&&this.group.scale.set(t.scale,t.scale,t.scale),JSON.stringify(t.model)!==JSON.stringify(this.props.model)&&(console.log("Add group =",t.model),this.group.add(t.model))}},{key:"init",value:function(){this.renderer=new yt.WebGLRenderer({antialias:!0,alpha:!0}),this.renderer.setPixelRatio(window.devicePixelRatio||1),this.renderer.setSize(this.width,this.height),this.canvas.appendChild(this.renderer.domElement),this.scene=new yt.Scene,this.light=new yt.DirectionalLight(16777164,1),this.light.position.set(0,100,30),this.scene.add(this.light);var t=new yt.AmbientLight(16755285);this.scene.add(t);var e=new yt.PerspectiveCamera(45,this.width/this.height,1,1e4);this.camera=e,this.camera.position.set(0,0,100),this.camera.lookAt(this.scene.position),this.group=new Et,this.group.useQuaternion=!0,this.scene.add(this.group),this.q=new yt.Quaternion}},{key:"render3D",value:function(){var t=this;window.requestAnimationFrame(function(){t.render3D()}),this.renderer.render(this.scene,this.camera)}},{key:"render",value:function(){var t=this;return s.a.createElement("div",{ref:function(e){t.canvas=e},className:b.a.overlayWeb3D})}}]),e}(n.Component),Rt=("".concat("http://localhost:3000","/3dmodels/chest/mj_chest01.mtl"),"".concat("http://localhost:3000","/3dmodels/chest/mj_chest01.obj"),"".concat("http://localhost:3000","/3dmodels/chest/img_o_mj_chest01.png"),function(t){function e(){return Object(o.a)(this,e),Object(l.a)(this,Object(u.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){var t=this;return s.a.createElement("div",null,s.a.createElement(kt,{model:null,loaded:function(e){return s.a.createElement(Ot,Object.assign({},t.props,{model:e}))}}))}}]),e}(n.Component)),St=function(t){function e(t){var a;return Object(o.a)(this,e),(a=Object(l.a)(this,Object(u.a)(e).call(this,t))).state={assets:it,video:null,canvas:null,overlay:null,result:null,landmarks:null,positions:null,anies:[],editMenu:!1,stampMenu:!1,tilt:{},data:{assetId:1,rate:{},bool:{}}},a.partsConfig={base:E.leftEye,vector:E.rightEye},a.partsConfig3D={base:E.leftEye,vector:E.rightEye,center:E.nose},a.callback={edit:function(){},assets:function(){a.setState({editMenu:!a.state.editMenu})},stamps:function(){a.setState({stampMenu:!a.state.stampMenu})}},a.overlay=null,a}return Object(h.a)(e,t),Object(c.a)(e,[{key:"setCanvas",value:function(t){this.state.canvas!==t&&t&&this.setState({canvas:t})}},{key:"setVideo",value:function(t){this.state.video!==t&&t&&this.setState({video:t})}},{key:"setOverlay",value:function(t){this.state.overlay!==t&&t&&(this.setState({overlay:t}),this.initCanvas())}},{key:"initCanvas",value:function(){this.state.canvas&&this.state.overlay&&this.setState({width:w.width,height:w.height})}},{key:"render",value:function(){var t=this;return s.a.createElement("div",{className:"App"},s.a.createElement(nt,{menu:[{id:1,label:"assets",icon:"assets",callback:this.callback.assets,show:this.state.editMenu},{id:2,label:"stamps",icon:"stamps",callback:this.callback.stamps,show:this.state.stampMenu}]}),s.a.createElement("div",{className:tt.a.viewer},s.a.createElement(R,{size:w,interval:x,video:function(e){t.setVideo(e)},canvas:function(e){t.setCanvas(e)}}),s.a.createElement(y,{canvas:this.state.canvas,video:this.state.video,interval:x,result:function(e){var a=p.getMediaDimensions(t.state.video),n=a.width,s=a.height,i=[e].map(function(t){return t.forSize(n,s)}),r=function(t){var e=t.getJawOutline();return{nose:t.getNose(),mouth:t.getMouth(),leftEye:t.getLeftEye(),rightEye:t.getRightEye(),leftEyeBrow:t.getLeftEyeBrow(),rightEyeBrow:t.getRightEyeBrow(),jawOutline:e}}(i[0].faceLandmarks);t.setState({landmarks:r,positions:i[0].landmarks.positions})}}),s.a.createElement(M,{assets:this.state.assets,progress:function(t){},done:function(){},view:function(e){return s.a.createElement(s.a.Fragment,null,s.a.createElement(At,{showEyes:!1,showPoints:!1,multiPoints:!1,editable:!0,editMenu:t.state.editMenu,editCallback:function(e){var a=t.state.data;a.bool=e.bool,a.rate=e.rate,a.assetId=e.assetId,t.setState({data:a})},video:t.state.video,setRef:function(e){t.setOverlay(e)},partsConfig:t.partsConfig3D,landmarks:t.state.landmarks,positions:t.state.positions,anies:e,loadData:t.state.data}),s.a.createElement(bt,{size:w,tilt:t.state.tilt,positions:t.state.positions,partsConfig:t.partsConfig3D,landmarks:t.state.landmarks,scene:function(e,a,n){return s.a.createElement(Rt,{size:w,partsConfig:t.partsConfig3D,position:e,quat:a,scale:n})}}))}})),s.a.createElement(N,{show:this.state.editMenu,assets:this.state.assets,callback:function(e){var a=d.clone(t.state.data);a.assetId=e,t.setState({data:a})}}),s.a.createElement(W,{show:this.state.stampMenu,assets:this.state.assets,currentAsset:this.state.data,callback:function(e){t.setState({data:e})}}))}}]),e}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(s.a.createElement(St,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[269,2,1]]]);
//# sourceMappingURL=main.dd03da02.chunk.js.map