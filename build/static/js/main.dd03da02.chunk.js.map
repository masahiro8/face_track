{"version":3,"sources":["components/StampManager/StampManager.scss","components/AssetsSelectMenu/AssetsSelectMenu.scss","components/Header/Header.scss","icon/baseline_save_white_48dp.png","icon/baseline_favorite_white_48dp.png","icon/baseline_toys_white_48dp.png","icon/baseline_delete_white_48dp.png","icon/baseline_play_circle_outline_white_48dp.png","App.scss","components/VideoCanvas.scss","canvas.point.js","components/FaceDetect.jsx","config.js","components/VideoCanvas.jsx","components/scheduleDelegate.js","components/spline.js","components/ani.js","components/AssetLoader.jsx","components/AssetsSelectMenu/AssetsSelectMenu.jsx","icon/Icons.js","components/StampManager/StampManager.jsx","components/Header/Header.jsx","assets/assets.js","util/vector.js","util/tilt.js","util/filter.js","util/initPointRate.js","components/Canvas2DView.jsx","components/Web3DView/Web3DView.jsx","components/Web3DView/Web3D.jsx","components/Web3DView/Scenes/Scene.jsx","components/Web3DView/Scenes/Model.jsx","App.js","serviceWorker.js","index.js"],"names":["module","exports","List","ListItem","Save","Header","HeaderItem","viewer","viewerCanvas","overlayClickable","overlayCanvas","overlayWeb3D","videoimage","setPoint","canvas","pos","col","ctx","getContext","fillStyle","fillRect","x","y","FaceDetect","_Component","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","pointlog","net","faceapi","state","faceDetect","inherits","createClass","key","value","_componentDidMount","asyncToGenerator","regenerator_default","a","mark","_callee2","_this2","wrap","_context2","prev","next","tinyFaceDetector","load","console","log","setInterval","_callee","_context","predict","stop","interval","apply","arguments","_predict","_callee3","options","result","_context3","abrupt","inputSize","scoreThreshold","video","withFaceLandmarks","sent","setState","react_default","createElement","Component","VIDEO_SIZE","width","height","INTERVAL","Math","floor","PARTS_INDEX","nose","leftEye","rightEye","Video","media","selfRef","initCam","navigator","mediaDevices","getUserMedia","audio","facingMode","size","p","Promise","resolve","then","stream","srcObject","onloadedmetadata","e","catch","err","alert","_this3","ref","setSelf","className","autoPlay","playsInline","Canvas","_this4","_this5","draw","getBoundingClientRect","context","drawImage","_this6","set","id","VideoImage","_Component3","_this7","_this8","styles","VideoCanvas_Video","setVideo","VideoCanvas_Canvas","setCanvas","scheduleDelegate","isPlay","time_total","time_start","time_interval","time_current","time_prev","delegate","init","setCurrent","checkCallback","window","requestAnimationFrame","update","bind","time","length","_","d","callback","restart","Date","getTime","_current","push","cos","sin","abs","PI","random","Spline","b","c","num","prototype","constructor","sp","tmp","i","w","culc","t","dt","j","sprite","image","local","rot","img","move","rotate","emit","getCtx","save","_rot","_pos","cx","cy","setTransform","restore","aniSprite","_sprite","scheduler","frame","schedule","makeFrames","makeSplineFrames","src","playAnims","splineFrames","_anim","anim","rots","map","val","index","frames","list","Array","n","r","current","getValuePerFrame","concat","posx","posy","spx","spy","total_frames","_time","toFixed","tiltFlag","reverse","_frames","tilt","deg","_tilt","localMove","localRotate","theta","fpos","_pos_x","_pos_y","undefined","AssetLoader","ani","done","progress","images","anies","assets","asset","loadImage","path","Image","onload","total","view","Fragment","show","AssetsSelectMenu","AssetsSelectMenu_AssetButton","AssetLoader_AssetLoader","GetMenu","AssetButton","_ref","onClick","icons","stamps","del","play","StampManager","data","saveAsset","assertThisInitialized","loadAsset","delete","deleteAsset","nextProps","JSON","stringify","_asset","currentAsset","assetId","newData","parseInt","filtered","StampManager_AssetButton","getAssets","menu","Header_HeaderItem","icon","label","children","alt","type","scale","shiftBase","vectorLength","sqrt","dotProduct","crossProduct","v","distance","p1","p2","pow","vec3","begin","end","center","_begin","_end","vector","_center","_crossProduct","acos","z","_crossProduct2","distanceFromEdge","_edgeOfBeginCenter","_edge","vec_length","lowpath","initPointRate","myPoint","_myPoint","_dotProduct","cos_theta","_a","_b","dotDistance","math","rate_vec_point","rate_from_edge","point","bool","dot","cross","rate","Canvas2DView","radian","star","BASE_PARTS","partsConfig","base","VECTOR_PARTS","CENTER_PARTS","positions","points","loadData","landmarks","clearCanvas","Filter","Tilt","showEyes","editMode","drawPoints","showPoints","drawParts","setRef","rect","clientX","left","clientY","top","editCallback","_end_vec","point_distance","vec","_x","_y","transform","clearRect","step","parts","getColor","editable","addPoint","faceGroup","geometry","THREE","material","color","mesh","position","add","Web3D","shift","axis","normalize","transScale","quat","lowPathFilter","quote","translation","setFromAxisAngle","degToRad","multiply","center_position","scene","OBJLoader","ObjLoader","model","loaded","_loadMatrial","mtl","resolved","rejected","MTLLoader","error","_loadModel","obj","_x2","_loadTexture","_callee4","tex","_context4","TextureLoader","_x3","_load","_callee6","promise","_context6","_callee5","texture","_context5","loadMatrial","loadModel","loadTexture","traverse","child","_x4","Scene","_Component2","renderer","light","persecamera","camera","controls","group","object","q","aspect","updateProjectionMatrix","render3D","quaternion","copy","antialias","alpha","setPixelRatio","devicePixelRatio","setSize","appendChild","domElement","ambientLight","perscamera","lookAt","useQuaternion","render","Glasses","Scene_ObjLoader","Scene_Scene","assign","App","overlay","editMenu","stampMenu","partsConfig3D","edit","initCanvas","Header_Header_Header","VideoCanvas_VideoImage","FaceDetect_FaceDetect","_faceapi$getMediaDime","resizedResults","res","forSize","jawOutline","getJawOutline","getNose","mouth","getMouth","getLeftEye","getRightEye","leftEyeBrow","getLeftEyeBrow","rightEyeBrow","getRightEyeBrow","getLandmarks","faceLandmarks","Canvas2DView_Canvas2DView","multiPoints","setOverlay","Web3D_Web3D","Model_Glasses","AssetsSelectMenu_AssetsSelectMenu_AssetsSelectMenu","StampManager_StampManager_StampManager","Boolean","location","hostname","match","ReactDOM","src_App_0","document","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.dd03da02.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"List\":\"uThst4IvgrclNdKKirhKm\",\"ListItem\":\"_1eUPmp4sFlGnA9iR6Z2yA0\",\"Save\":\"_32Sa-LcM3vqu_cVGP-8nv5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"List\":\"_17OjsATFS6zIy16TMy7zqq\",\"ListItem\":\"_30OCCDeljyP59MV9Um1PQS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Header\":\"_1_1R8koVt7QLbrCdGtt2l0\",\"HeaderItem\":\"_1eoswoDnCHUentPP5rEtLr\"};","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAQAAABIkb+zAAABl0lEQVR4Ae3YIUiDYRCH8VPQiXzai7OI2ntVQexJzNq1f00sqlHRntSNdVxPW4cN2YzKWDFtj30w9r1zujv4/3p54MLdmYiIiIiMxwYX1Onx13KbPTJeGZLAVQIlmgAQNIEHgLAJbDGAwAlcAgROoAGhE/iG0AmMsBlLSAgaAHn0AMijB0AePQDy6AGQRw+APHoA5NEDmEOAAhSgAAUowIFwAQpQgAIUoAAFKEABClCAAj555JBdMtbY4YhHvuIEvHPKko1gmVM6EQIqrNgYrPDsPeDOJuDGc0CNBZuABapeA7qsWgGs0vUZcGIFceIxoM2iFcQiLX8BN5aAW38BB5aAfX8B25aAbX8B65aAdX8BmSUgm3mARmjfErDnL+DaEnDtL6BtCWj5C4BjK4jj6Mvch88AqBZap2uxD5rb2CdlJcZRf8aSjaDEGZ1Ib5UnjthlbX5vlT6e9C0VDTxpWiqu8OTKUrHJAC8GlC0d93jxYNOgRAMPmpRsOmS8MGSehryQ2W9Q5pw6Pf5bjzfOKZuIiIiIjPUDoNPYrFKF/TUAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAQAAABIkb+zAAACuklEQVR4Ae3WA7AlVxSF4dXzYtu2XYht27ZZjJNCbNsc27btwtjmU/9j47R736n+yjzYVCGoQqFQKBQKBbbhAl6nGbMBmMsI2vEvH/MIuykEducRfqYfVawwi2a8xgVsrXRQxlX8Tzkb4tOBe9lCDmzJPXTCZ0PK+Z8rKVOS2II3mEQQk3lpw49gT95mMkFM4g22UDI4kcGEMZortQ425xPKCWMwJyo+nqSC8L5kK62GI+hPeAt5SnGwJbWIajAHazlOYyZR1WLL6NfvQRyzuViLcQkLiKN7xCfwD3GVcwEXUE5cfyk8XiIJC1hAEl5SOFxANZZUc6GCowbDsKY/NRQU92LRfQqGzRmDRaMDzmbuwap7FAT1saq+3NiOcqwqZzu5cCWWXSEX3sey9+VCAyyrLxcGY9kQuTAVy6bKhXIsWygXFpb6AyZj2US5MALLhsqFdljWWC58VeqD7HEsu0suHIRlu8mNgVjVW0HwJla9qSA4GB+LfA5UMLTColYKimux6DIFhcdArOmsMLgJa05VOHTDkl8VFifhY8U89wCzvRU9pyjYisFY0AlP0XAY88jbXA6Qm+FudIPi4Uvy9KXiYnO6kZfubK742Isx5GEseyoZHM0ssjaLo5QcLqKKLFVyoZLF/WSnmuuUPN4lGz53Kw14/E0WnlRaKMvgCa8pTXj8Spo+V9rw+I60fKcs4PEVafgOT1nhK/u/78DHJOljZY9XSMorygcP4xOXz8PKD7dTTRyV3K58cS0VRFXB5cofFzKfKOZzoWzgTGYT1mzOkB0cywTCmMCxsoX9GElQQ9lP9rAL3QiiGzvKJramNS6t2Vp2sTm12JhabC7b8PiFDfkFT6WAN1ifN1Q6eByf1fk8IMscK0YF16r0cC7zAJjNuSpNnMRkJnOsSheHcqAKhUKhUChsshYBRZ3Amgr4pRAAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAQAAABIkb+zAAACTUlEQVR4Ae3aNXbdUBSF4VOFxhCo7FmYsQy2oXE4TZhpCMY6zEkXbMLRFMIcqfvDKEdrF/c+n7OWvhnsh7q/ZKm1Wi2W0sc2zvEWwGJhmFlK/mBx0McdaiwGujkFEHQAmygh7AAO0MC84ygEHsAOCDyAdRB4ACt4F3vANQg8gPUQe8CD0AMYgtgDZkIPYBll7AFjEHvA3ugDTkUfUEQf8CL6gKodUC8YP73hHBP0s9jy4RkytWDUlMwyZHnwBFlDwVDcoc/S4yQytWA0OE23oz+yesEQfGSzpcQ4Mq1gCA6krZ8lIrVgCI5aOkwj0guGYIelwiAivWBINnT+SKkXDMVbVqZsQgK9YIiuWSqcR1ArGH4+RqxSwxYPSOleh9MiQ6Q2bKmwSxgwQ2ozlg7HaKYXDF3Jso7d4GCMHMYsJbbwkf/ZSw77LC26OMn8TpHDKUuPXm5QV5BDYXkwUjsmviCHF7kfNZjgLG8AqMihEkpDEpXL0oDumcvSgK5wWRrQnXRZGtDtc1ka0I17LA26kmUeS4NuysxjadANmfkrDboH9oW/0qBbb194Kw26i/aNr9Kge8cq+8ZXadCtsR88lQbdTvvFT2nQHbc/eCkNuiP2Fw+lQfeBrfYPB6VBdoouq/FQGhQ36LV5eSsNdZ+Yazom+iwNAK+1gzq6yhZWO+BZ9AFF9AEnow/YF33AeOwBJctiD5gyn1ANxR7wwLxCsz72gIvml14wnNILhlN6wXBKLxhO6QXDKb1gOKUXDKf0guGUXjCcqhWMpFqt1mefsRYz20BHUgAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAQAAABIkb+zAAAAs0lEQVR4Ae3PMRGDQAAF0eto0EBMIoAWCYkILCQSwAlDDxsLycC/odhVsK9ckZmZmZkx8GvD/ffzhPx+npDfvxOBygkQcC4BAgRkMjPCCRAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAg4EYAAQIECBAgQICAjWRbHjCTbMkDRpKNecCDnVQ7XcnHk1SvUiMaZhItNKVOtEwcXNnBRFtqRkfPh5Wzrbzp6YqZmZmZ/d0XPSYAGSNVNd8AAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAQAAABIkb+zAAAEmklEQVR4Ae3bQ7zkWBTH8dPPao9t27Z345m2bdtejW3b2rdt1Gvbtuo3numTynvBza2qRb77wsnnn+TiXIlFJxaLxWKcz2N04QV+YDKL2MARDrCRBJP5gRfowmOcK9mIMurwNivxYwXv8AxVJVtwJa+yl6B28zpXSWaRz7NMwMQE6pAvmUBNBrCRKKxnIDUlnahCE7YSpc00pYqkB5cxGRsmc5nYx2Psw5Z9PCY2kcNwvBxiHG/QmYe5mtMpopjTuIpH6MzrjOMQXkZYixJF/EhlyhnM3RR6fMddDKacyvxEkUSP45lKRXYwkiskAC5nFDuoyFRqSbQ4hxW4W0l7SiQESmnHKtwt4RyJDiezCjdJXqXUcAjyKu5WcUp04SnHzRrukQhwD6twk+AEMUcRM3HzNdUkIlTnc9zMpEhM8ZJrdNpJxOhAklQviRnuI1WSBmIBTVxLeEDC4zg2k6q5WEILUm3iOAmLD0nVUyyiF6k+kHC4i1QvimU8T6q7JTjyWIbTb1RJw1D9F5yWki9B0QancsrSNL9O4NQm+PVfh5b0N9rhPYrFEFeRRFtOngRBY5zeEF+ABVwshngTp0YSBAm0nRznuwDYRx3j4ctOtIT4x504DRKf+IdplBiE0x3iFx+g7aZG0AJMo0QNdod8H1DKAbQx4hv/MI8SY9D2+xy68zhO5wQvwDxKnIfT4+IHL6LNlABQzKLEzFDjAOai9TAowChKdEebK96ohdMVBgUYRYkrcKolXrgXbbsEgmIaJbah3Rt8DPSVQQHGUeJLtDbBh7ODjAswiBKD0J4XL/yGVse4AIMoUQftN/HCHLTrjQswiBLXo80RL6xAO9u4AIMocTbaiuD3/XHGBRhEiePRtokXkmhFxgUYRIkitKPihYNoBVYL8JimUIB2ULywJasidBzaFvHC8jTdxB+HuomXB3+M3mChgL00svcY/Q2tbkZfZHXRfhUvvIA2RAIxjo7C0OBDiXYWBnMqOkaDubbihQeyaji9He1+8UJtSxOajyOZ0JSJN2ajdZcADKOj0A1ttvjBC2jTMjapn472QlqWVQyio3BO2GWVUvajjRbfjKKjMBrtAKXiD+9l5dLie+IXd+A0WHxS0THAEJxuN1terym+6OgYXP8daAnTDY7X07rB8TpOjSUI8liLluQq8UFFJySuIIm2jjwJhnY4JdK2yVeOU7swPaGLcPqFHLGMHH7DaRF5Ehy3RNt8YdBccrOEwwek6iUW0du01UDhODaltdmjGak2c5yExwOkStJELKA5SVLdZ6fhqYNEjHZg5Z6jiBnWW86q8TVuZlAk5qhNAjdruFsiwN2swU2C2hINTqmw7fIV47bLl83bLk0bX9uGbHwtoQ2rcLeCc7O79fgKj9bj4zPR/L2EIZ7N38XczVCWUJkfKRI7qOKr/X48b9Dln/b7Eoo5/Z/2+zcYzyG8DKeK2MST7LV6AMI+LrF2BOUS8RYfAvoHNRlo+RiWfeRTl4mYmEhd8iWzuIrX2RPqKOLlki2oSh3eMj8Mmj3HcX/87zjuQTaSYAo/8iJdeIzzJTKxWCwWi/0OGaOdH89+l7kAAAAASUVORK5CYII=\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"viewer\":\"_2jJlzIwcKi4BhGPBAPRaxa\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"viewerCanvas\":\"xQJ9UXXt3Gp6VtcIouN-a\",\"overlayClickable\":\"P2Ozy3EA7iOKnUsuEd04Y\",\"overlayCanvas\":\"_1VTjcrIdjUewwZ-qVkXQxP\",\"overlayWeb3D\":\"_1i04iIxbpEXE3je7EydqW3\",\"videoimage\":\"_27P8rrrUDhjUTuQVCNHvHs\"};","import * as faceapi from \"face-api.js/dist/face-api.js\";\r\n\r\nexport const setPoint = ( canvas , pos  , col) =>{\r\n  const ctx = canvas.getContext(\"2d\");\r\n  ctx.fillStyle = col||\"#0ff\";\r\n  ctx.fillRect(pos.x,pos.y,4,4);\r\n}\r\n\r\nexport const getLandmarks = (landmarks) => {\r\n  const jawOutline = landmarks.getJawOutline();\r\n  const nose = landmarks.getNose();\r\n  const mouth = landmarks.getMouth();\r\n  const leftEye = landmarks.getLeftEye();\r\n  const rightEye = landmarks.getRightEye();\r\n  const leftEyeBrow = landmarks.getLeftEyeBrow();\r\n  const rightEyeBrow = landmarks.getRightEyeBrow();\r\n  return {\r\n    nose:nose,\r\n    mouth:mouth,\r\n    leftEye:leftEye,\r\n    rightEye:rightEye,\r\n    leftEyeBrow:leftEyeBrow,\r\n    rightEyeBrow:rightEyeBrow,\r\n    jawOutline:jawOutline,\r\n  }\r\n}\r\n\r\nexport const resizeCanvasAndResults = (dimensions, canvas, results) => {\r\n  const { width, height } = dimensions instanceof HTMLVideoElement\r\n    ? faceapi.getMediaDimensions(dimensions)\r\n    : dimensions\r\n  canvas.width = width\r\n  canvas.height = height\r\n\r\n  // resize detections (and landmarks) in case displayed image is smaller than\r\n  // original size\r\n  return results.map(res => res.forSize(width, height))\r\n}\r\n\r\nexport const drawDetections = (dimensions, canvas, detections)=> {\r\n  console.log(\"drawDetections\" ,detections);\r\n  const resizedDetections = resizeCanvasAndResults(dimensions, canvas, detections)\r\n  faceapi.drawDetection(canvas, resizedDetections)\r\n}\r\n\r\nexport const drawLandmarks = (dimensions, canvas, results, withBoxes = true) => {\r\n  \r\n  const resizedResults = resizeCanvasAndResults(dimensions, canvas, results)\r\n  console.log(\"drawLandmarks = \",resizedResults);\r\n  if (withBoxes) {\r\n    faceapi.drawDetection(canvas, resizedResults.map(det => det.detection))\r\n  }\r\n\r\n  const faceLandmarks = resizedResults.map(det => det.landmarks)\r\n  const drawLandmarksOptions = {\r\n    lineWidth: 2,\r\n    drawLines: true,\r\n    color: 'green'\r\n  }\r\n  faceapi.drawLandmarks(canvas, faceLandmarks, drawLandmarksOptions)\r\n}","import React, { Component } from \"react\";\nimport * as _ from \"lodash\";\nimport * as faceapi from \"face-api.js/dist/face-api.js\";\nimport { constant } from \"@tensorflow/tfjs-layers/dist/exports_initializers\";\nimport {setPoint,getLandmarks } from '../canvas.point';\n\n// tiny_face_detector options\nlet inputSize = 128\nlet scoreThreshold = 0.5\n\nexport class FaceDetect extends Component {\n  constructor(props) {\n    super(props);\n    this.canvas = null;\n    this.pointlog = null;\n    this.net = new faceapi.FaceLandmark68TinyNet();\n    this.state = {\n      faceDetect: {},\n    };\n  }\n\n  async componentDidMount() {\n\n    //必要なモデルのロード\n    await faceapi.nets.tinyFaceDetector.load('models/face/');\n    await faceapi.loadFaceLandmarkModel('models/face/');\n    console.log(\"load models\");\n    setInterval(async () => {\n      await this.predict();\n    }, this.props.interval);\n  }\n\n  async predict() {\n    if (!this.props.canvas) return;\n    //検出\n    let inputSize = 128;\n    let scoreThreshold = 0.5;\n    const options = new faceapi.TinyFaceDetectorOptions({ inputSize, scoreThreshold })\n    const result = await faceapi.detectSingleFace(this.props.video, options).withFaceLandmarks();\n    //console.log(\"predict result\" ,result);\n    if (result) {\n      //console.log(\"result \" , result );\n      // const { width, height } = faceapi.getMediaDimensions(this.props.video);\n      // const resizedResults = [result].map(res => res.forSize(width, height));\n      this.setState({ faceDetect: result });\n      this.props.result(result);\n    }\n  }\n\n  render() {\n    return (\n      <div/>\n    );\n  }\n}","// export const location = 'https://192.168.100.109:3000';\nexport const location = 'http://localhost:3000';\n\nexport const VIDEO_SIZE = {\n  width: 640,\n  height: 480\n};\nexport const INTERVAL = Math.floor(1000 / 30);\n\n//追従するパーツ\nexport const PARTS_INDEX = {\n  nose: 30,\n  leftEye: 38,\n  rightEye: 44\n}; //[30,38,44]; // 鼻 左目　右目\n","import React, { Component } from \"react\";\nimport styles from './VideoCanvas.scss';\nimport {VIDEO_SIZE} from '../config';\n\nclass Video extends Component {\n  constructor(props) {\n    super(props);\n    this.media = null;\n    this.selfRef = null;\n  }\n\n  async componentDidMount() {\n    await this.initCam();\n    //console.log(\"detect init\");\n  }\n\n  async initCam() {\n\n    // const stream = await navigator.mediaDevices.getUserMedia({ video: {} }) \n    this.media = navigator.mediaDevices.getUserMedia({\n      audio: false,\n      video: {\n        // facingMode: \"environment\",\n        facingMode: \"user\",\n        width: this.props.size.width, \n        // height: this.props.size.height,\n      },\n    });\n\n    let p = new Promise( resolve =>{\n      this.media.then(stream => {\n        this.selfRef.srcObject = stream;\n        this.selfRef.onloadedmetadata = function(e) {\n          //console.log(\"Onload video\" , e);\n          resolve();\n        };\n      });\n      \n      this.media.catch(err => {\n        alert(err);\n      });\n    });\n\n    return p;\n    \n  }\n\n  render() {\n    return (\n      <video\n        ref={ref => {\n          this.selfRef = ref;\n          this.props.setSelf(ref);\n        }}\n        className=\"video\"\n        autoPlay\n        playsInline\n        width={VIDEO_SIZE.width}\n        height={VIDEO_SIZE.height}\n      />\n    );\n  }\n}\n\nclass Canvas extends Component {\n  constructor(props) {\n    super(props);\n    this.canvas = null;\n  }\n\n  componentDidMount() {\n    setInterval(() => {\n      this.draw();\n    }, this.props.interval);\n  }\n\n  draw() {\n    if (!this.props.video || !this.props.canvas) {\n      return;\n    }\n    let rect = this.props.video.getBoundingClientRect();\n    var context = this.canvas.getContext(\"2d\");\n    this.canvas.width = this.props.size.width;\n    this.canvas.height = this.props.size.height;\n    context.drawImage(\n      this.props.video,0, 0,\n      this.props.size.width,\n      this.props.size.height);\n  }\n\n  render() {\n    return (\n      <canvas\n        ref={ref => {\n          this.canvas = ref;\n          this.props.set(ref);\n        }}\n        id={\"canvas\"}\n        className=\"canvas\"\n      />\n    );\n  }\n}\n\nexport class VideoImage extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      video: null,\n      canvas: null,\n    };\n  }\n\n  setVideo(ref) {\n    if (this.state.video !== ref && ref) {\n      this.setState({ video: ref });\n      this.props.video(ref);\n    }\n  }\n\n  setCanvas(ref) {\n    if (this.state.canvas !== ref && ref) {\n      this.setState({ canvas: ref });\n      this.props.canvas(ref);\n    }\n  }\n\n  render(){\n    return(\n      <div className={styles[\"videoimage\"]}>\n        <Video\n          size = {this.props.size}\n          setSelf={ref => {\n            this.setVideo(ref);\n          }}\n        />\n        <Canvas\n          size = {this.props.size}\n          video={this.state.video}\n          set={ref => {\n            this.setCanvas(ref);\n          }}\n          interval={this.props.interval}\n        />\n      </div>\n    )\n  }\n}","import * as _ from 'lodash';\nexport class scheduleDelegate {\n  constructor(){\n    this.isPlay = false;\n\n    this.time_total = null;\n    this.time_start =  null;\n    this.time_interval = null;\n    this.time_current = null;\n    this.time_prev = null;\n\n    this.delegate = [];\n    this.init();\n  }\n\n  init(){\n    //console.log(\"init schedule delegate\");\n  }\n\n  update () {\n    if( this.isPlay ) {\n      //ここに実装\n      this.setCurrent();\n      this.checkCallback(this.time_total);\n      // console.log(\"total = \", this.time_total/1000);\n    }\n    window.requestAnimationFrame(this.update.bind(this));\n  }\n\n  checkCallback(time) {\n    if(  !this.delegate.length ) return;\n    //コールバックを取り出す\n    let delegate = _.filter( this.delegate , ( value )=>{\n      return value.time == Math.floor(time/1000);\n    });\n    //コールバックを削除する\n    this.delegate = _.reject( this.delegate , ( value )=>{\n      return value.time == Math.floor(time/1000);\n    });\n    _.each ( delegate  , d =>{\n      d.callback();\n    })\n  }\n\n  start () {\n    this.time_total = 0;\n    this.restart();\n    this.update();\n  }\n\n  restart () {\n    this.time_start = new Date().getTime();\n    this.time_current = new Date().getTime();\n    this.time_prev = new Date().getTime();\n    this.time_interval = 0;\n    this.isPlay = true;\n  }\n\n  pause () {\n    this.isPlay = false;\n  }\n\n  /**\n   * 時間の更新\n   */\n  setCurrent() {\n    const _current =  new Date().getTime();\n    this.time_current = _current - this.time_start;\n    this.time_interval = _current  - this.time_prev;\n    this.time_total += this.time_interval;\n    this.time_prev = _current;\n  }\n\n  setCallback(  value  ) {\n    this.delegate.push({\n      time : value.time,\n      callback : value.callback,\n    })\n  }\n}","var cos    = Math.cos,\nsin    = Math.sin,\nabs    = Math.abs,\nPI     = Math.PI,\nfloor  = Math.floor,\nrandom = Math.random;\n \n export function Spline() {\n    this.a = [];\n    this.b = [];\n    this.c = [];\n    this.d = [];\n\n    this.num = 0;\n}\nSpline.prototype = {\n    constructor: Spline,\n    num: 0,\n    a: null,\n    b: null,\n    c: null,\n    d: null,\n    init: function (sp) {\n        var tmp;\n        var w = [];\n        var i;\n\n        this.num = sp.length - 1;\n        var num = this.num;\n\n        var a = this.a;\n        var b = this.b;\n        var c = this.c;\n        var d = this.d;\n\n        // 3次多項式の0次係数(a)を設定\n        for(i = 0; i <= num; i++) {\n            a[i] = sp[i];\n        }\n\n        // 3次多項式の2次係数(c)を計算\n        c[0] = c[num] = 0.0;\n        for(i = 1; i < num; i++) {\n            c[i] = 3.0 * (a[i - 1] - 2.0 * a[i] + a[i + 1]);\n        }\n\n        // 左下を消す\n        w[0] = 0.0;\n        for(i = 1; i < num; i++) {\n            tmp = 4.0 - w[i - 1];\n            c[i] = (c[i] - c[i - 1]) / tmp;\n            w[i] = 1.0 / tmp;\n        }\n\n        // 右上を消す\n        for(i = num - 1; i > 0; i--) {\n            c[i] = c[i] - c[i + 1] * w[i];\n        }\n\n        // 3次多項式の1次係数(b)と3次係数(b)を計算\n        b[num] = d[num] = 0.0;\n        for (i = 0; i < num; i++) {\n            d[i] = (c[i + 1] - c[i]) / 3.0;\n            b[i] = a[i + 1] - a[i] - c[i] - d[i];\n        }\n    },\n\n    // 媒介変数(0～num - 1の実数）に対する値を計算\n    culc: function (t) {\n        var j = floor(t);\n        var dt;\n        var num = this.num;\n\n        var a = this.a;\n        var b = this.b;\n        var c = this.c;\n        var d = this.d;\n\n        if (j < 0) {\n            j = 0;\n        }\n        else if (j >= num) {\n            j = num - 1; // 丸め誤差を考慮\n        }\n\n        dt = t - j;\n\n        return a[j] + (b[j] + (c[j] + d[j] * dt) * dt ) * dt;\n    }\n};","import * as _ from 'lodash';\nimport {scheduleDelegate} from \"./scheduleDelegate\";\nimport {Spline} from './spline';\n\nclass sprite {\n  constructor(){\n\n  }\n\n  init ( image ) {\n    this.local  = {\n      pos :{x:0,y:0},\n      rot : 0,\n    }\n    this.img = image;\n  }\n\n  getCtx () {\n    return this.canvas.getContext(\"2d\");\n  }\n\n  setCanvas ( canvas ) {\n    this.canvas = canvas;\n    this.ctx = canvas.getContext(\"2d\");\n    return this;\n  }\n\n  transform ( pos , rot ) {\n    this.move(pos).rotate(rot).emit();\n  }\n\n  move ( pos ) {\n    this.local.pos = pos;\n    return this;\n  }\n\n  rotate (  rot  ) {\n    this.local.rot = rot;\n    return this;\n  }\n\n  emit () {\n    const ctx = this.getCtx();\n    ctx.save();\n    const _rot = this.local.rot;\n    const _pos = this.local.pos;\n    \n    // 回転の中心位置を計算（画像の中心を回転中心にする）\n    const cx = _pos.x + this.img.width/2;\n    const cy = _pos.y + this.img.height/2;\n\n    // 画像を回転\n    ctx.setTransform(\n      Math.cos(_rot), \n      Math.sin(_rot), \n      -Math.sin(_rot), \n      Math.cos(_rot),\n      cx-cx*Math.cos(_rot)+cy*Math.sin(_rot),\n      cy-cx*Math.sin(_rot)-cy*Math.cos(_rot)\n    );\n    ctx.drawImage(this.img, _pos.x, _pos.y);\n    ctx.restore();\n    return this;\n  }\n}\n\nconst base_fps = 60;\n\nclass animOptimize {\n  /***\n   * 基準 fps = 60\n   * 1.再生時間から全フレーム数を算出\n   * 2.1フレームあたりの移動量\n   * 3.\n   * \n   * { pos {x:0,y:0} time:0.0 }\n   * { pos {x:0,y:60} time:2.0 }\n   * \n   * 1. 60 * 2.0 = 120.0\n   * 2. fps/120.0 = 移動量\n   * \n   */\n\n  constructor(){\n    this.fps = 0;\n    this.fps_prev  = new Date().getTime();\n    this.update();\n  }\n  \n  update () {\n    window.requestAnimationFrame(this.update.bind(this));\n    this.flatFps();\n  }\n   /**\n   * fps平均化\n   */\n  flatFps  () {\n    const _fps_current = new Date().getTime();\n    const time = _fps_current - this.fps_prev;\n    this.fps_prev = _fps_current;\n    const FPS = (1000/time).toFixed(1);\n    //console.log(\"fps \" , FPS , time);\n  }\n}\n\nconst range = (min, max) => {\n  const len  = max - min;\n  const rand = Math.random() * len;\n  return min + rand;\n}\n\n\nexport class aniSprite extends sprite {\n\n  constructor( value, image , scheduler){\n\n    super(image);\n    this.value = value;\n    this.scheduler = scheduler;\n    this.isPlay = true;\n\n    this.frame  = 0;\n\n    this.schedule = new scheduleDelegate();\n    //this.ftpOptimizer = new animOptimize();\n\n    this.init( image );\n    this.makeFrames();\n    this.makeSplineFrames();\n    this.update();\n\n  }\n\n  getImageSrc () {\n    return this.sprite.value.src;\n  }\n\n  update () {\n    window.requestAnimationFrame(this.update.bind(this));\n    this.playAnims();\n  }\n\n  playAnims () {\n    if ( this.frame >= this.value.splineFrames.length )\n    { this.frame = 0; } else \n    { this.frame++; }\n  }\n\n  makeSplineFrames ( ) {\n\n    let  _anim =  this.value.anim;\n\n    const getValuePerFrame = ( current , next , frames , index )=>{\n      return current + ((( next - current ) /frames ) * index ) ;\n    }\n\n    let rots = [];\n    _anim.map(( val , index  ) => {\n      if( _anim[index+1] ) {\n        const _time = _anim[index+1].time - _anim[index].time;\n        const frames  = base_fps * _time;\n        const _frames = Array.apply(null,new Array(frames));\n        let list = _frames.map(( value  , n ) =>{\n          const r = getValuePerFrame(_anim[index].rot , _anim[index+1].rot,frames,n);\n          return { rot :Math.floor(r) };\n        })\n        rots = rots.concat(list);\n      }\n    })\n\n    if( _anim.length ==  1 ) {\n      rots[0] = { rot : _anim[0].rot };\n    }\n\n    //位置の曲線変換\n    let posx = [];\n    let posy = [];\n    _anim.map(( val ) =>{\n      posx.push(val.pos.x);\n      posy.push(val.pos.y);\n    })\n    const spx = new Spline();\n    const spy = new Spline();\n    spx.init(posx);\n    spy.init(posy);\n\n    this.value.splineFrames = [];\n    let total_frames = 0;\n    _anim.map(( val  ,index ) => {\n      if( _anim[index+1] ) {\n        const _time = _anim[index+1].time - _anim[index].time;\n        const frames  = base_fps * _time;\n        total_frames += frames;\n      }\n      index++;\n    })\n    \n    const total_frames_array = Array.apply( null , Array(total_frames));\n    let list = total_frames_array.map(( val , index  ) => {\n      const m = ((_anim.length-1)/total_frames);\n      const i = (m*index).toFixed(2);\n      const x = spx.culc( i );\n      const y = spy.culc( i );\n      return { index :index , pos :{x:x,y:y} };\n    });\n\n    if( this.value.tiltFlag ) list.reverse();//回転変換を使う場合はフレーム順を変える\n\n    this.value.splineFrames = list.map(( val  , index  ) =>{\n      return { index :val.index ,pos:val.pos  ,rot:rots[index].rot};\n    })\n    //console.log(\"this.value.splineFrames \" ,this.value.splineFrames);\n  }\n\n  /**\n   * フレーム数を確定\n   * とりあえずposだけ\n   */\n  makeFrames () {\n    const getValuePerFrame = ( current , next , frames , index )=>{\n      return (( next - current ) /frames ) * index ;\n    }\n\n    this.value.frames = [];\n    _.each( this.value.anim , ( val , index  ) => {\n      if( this.value.anim[index+1] ) {\n        const _time = this.value.anim[index+1].time - this.value.anim[index].time;\n        const frames  = base_fps * _time;\n        const _frames = new Array(frames);\n        let list = _.map( _frames , ( value , n ) =>{\n          const x = getValuePerFrame(this.value.anim[index].pos.x , this.value.anim[index+1].pos.x,frames,n);\n          const y = getValuePerFrame(this.value.anim[index].pos.y ,this.value.anim[index+1].pos.y,frames,n);\n          return { index :n , pos :{x:x,y:y} };\n        })\n        this.value.frames = this.value.frames.concat(list);\n      }else {\n        this.value.frames.push({index:1 , pos:this.value.anim[index].pos });\n      }\n    })\n  }\n\n  transform ( pos , tilt , deg ) {\n\n    let _pos = pos;\n    let _tilt = tilt;\n\n    _pos = this.localMove(pos , deg);\n    _tilt = this.localRotate(tilt );\n\n    //180° => ラジアン\n    if( !this.value.tiltFlag ) _tilt = 180*Math.PI/180;\n\n    this.move(_pos).rotate(_tilt).emit();\n  }\n\n  /**\n   * ローカル座標\n   * @param {*} pos \n   * @param {int} index\n   */\n  localMove ( pos , theta) {\n    \n    if( \n      !_.has(this.value,\"frames\") || \n      !this.value.splineFrames[this.frame]\n    ) return  pos;\n\n    const fpos = this.value.splineFrames[this.frame].pos;\n\n    //回転行列\n    const _pos_x =  (Math.cos(theta)* fpos.x) + (Math.sin(theta)* fpos.y );\n    const _pos_y =  (-1 * Math.sin(theta)* fpos.x) + (Math.cos(theta)* fpos.y );\n\n    if( !this.value.tiltFlag ) {\n      return {\n        x : pos.x + fpos.x,\n        y : pos.y + fpos.y\n      }\n    } else  {\n      return {\n        x : pos.x + _pos_x,\n        y : pos.y + _pos_y\n      }\n    }\n\n  }\n\n  /**\n   * ローカル座標\n   * @param {*} rot \n   * @param {int} index\n   */\n  localRotate ( rot ,  n  = 0) {\n    if( \n      !_.has(this.value,\"anim\") || \n      !this.value.splineFrames[this.frame]||\n      !_.has(this.value.splineFrames[this.frame],\"rot\")\n    ) return  rot;\n\n    if(!this.value.tiltFlag) return  rot;\n    \n    return rot + this.value.splineFrames[n].rot;\n  }\n}\n\nclass ani {\n\n  constructor(){\n  \n  }\n}\n\nconst instance =  new ani();\nexport default instance;","import React, { Component } from \"react\";\nimport * as _ from 'lodash';\nimport { sigmoid } from \"face-api.js\";\nimport {aniSprite} from './ani';\n\nexport default class AssetLoader extends Component {\n  constructor(props){\n    super(props);\n    this.state = {\n      done:false,\n      progress : 0,\n      images : [],\n      anies : [],\n    }\n    _.map( props.assets , asset =>{\n      this.loadImage(asset);\n    })\n  }\n\n  loadImage( asset ){\n    _.each ( asset.src , path => {\n      let img = new Image();\n      img.onload = ( image ) =>{\n        let images = this.state.images;\n        images.push({\n          id:asset.id,\n          image:img,\n        });\n        this.setState({\n          progress : this.state.progress+1,\n          images:images,\n        });\n        \n        this.props.progress({\n          result : this.state.progress ,\n          total : this.props.assets.length\n        });\n\n        if( this.props.assets.length === this.state.progress ) {\n\n          let anies = _.map( this.state.images , image =>{\n            const value = _.filter( this.props.assets , asset =>{return asset.id===image.id });\n            return {\n              id:image.id,\n              sprite:new aniSprite( value[0] , image.image , this.schedule )\n            };\n          });\n\n          this.setState({\n            done:true,\n            anies:anies,\n          });\n\n          this.props.done();\n        }\n      }\n      img.src = path;\n    })\n  }\n\n  show () {\n    if ( this.state.done ) {\n      return this.props.view(this.state.anies)\n    }\n    return null\n  }\n\n  render(){\n    return(<React.Fragment>{this.show()}</React.Fragment>)\n  }\n}","import React, { Component } from \"react\";\nimport * as _ from \"lodash\";\nimport AssetLoader from \"../AssetLoader\";\nimport { aniSprite } from \"../ani\";\nimport styles from \"./AssetsSelectMenu.scss\";\n\nexport default class AssetsSelectMenu extends Component {\n  constructor(props) {\n    super(props);\n  }\n\n  GetMenu(anies) {\n    return _.map(anies, ani => {\n      return (\n        <AssetButton\n          id={ani.id}\n          src={ani.sprite.value.src[0]}\n          callback={id => {\n            this.props.callback(id);\n          }}\n        />\n      );\n    });\n  }\n\n  render() {\n    const classname = () => {\n      return this.props.show ? styles[\"List\"] + \" show\" : styles[\"List\"];\n    };\n    return (\n      <AssetLoader\n        assets={this.props.assets}\n        progress={progress => {}}\n        done={() => {}}\n        view={anies => {\n          return <div className={classname()}>{this.GetMenu(anies)}</div>;\n        }}\n      />\n    );\n  }\n}\n\nconst AssetButton = ({ id, src, callback }) => {\n  return (\n    <div\n      className={styles[\"ListItem\"]}\n      onClick={e => {\n        callback(id);\n      }}\n    >\n      <img src={src} />\n    </div>\n  );\n};\n","import save from \"./baseline_save_white_48dp.png\";\nimport stamps from \"./baseline_favorite_white_48dp.png\";\nimport assets from \"./baseline_toys_white_48dp.png\";\nimport del from \"./baseline_delete_white_48dp.png\";\nimport play from \"./baseline_play_circle_outline_white_48dp.png\";\n\nexport const icons = {\n  save,\n  stamps,\n  assets,\n  del,\n  play\n};\n","import React, { Component } from \"react\";\nimport * as _ from \"lodash\";\nimport { aniSprite } from \"../ani\";\nimport { load } from \"@tensorflow-models/posenet\";\nimport styles from \"./StampManager.scss\";\nimport { icons } from \"../../icon/Icons\";\n\n/***\n * アセットと座標を保存する\n */\n\nexport default class StampManager extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      data: []\n    };\n    this.assets = props.assets; //元のデータ\n    this.callback = {\n      save: this.saveAsset.bind(this),\n      load: this.loadAsset.bind(this),\n      delete: this.deleteAsset.bind(this)\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (\n      JSON.stringify(nextProps.assets) !== JSON.stringify(this.props.assets)\n    ) {\n      this.assets = nextProps.assets;\n    }\n  }\n\n  saveAsset() {\n    let _asset = _.filter(this.assets, val => {\n      return val.id == this.props.currentAsset.assetId;\n    });\n    let newData = _.clone(this.props.currentAsset);\n    newData.id = parseInt(_.uniqueId());\n    newData.src = _asset[0].src[0];\n\n    let data = _.clone(this.state.data);\n    data.push(newData);\n    this.setState({ data });\n\n    //TODO クラウドに保存\n  }\n\n  loadAsset(id) {\n    let filtered = _.filter(this.state.data, val => {\n      return val.id === id;\n    });\n    let data = _.clone(filtered[0]);\n    delete data.src;\n    delete data.id;\n    this.props.callback(data);\n  }\n\n  deleteAsset(id) {\n    let filtered = _.filter(this.state.data, val => {\n      return val.id !== id;\n    });\n    this.setState({\n      data: filtered\n    });\n  }\n\n  getAssets() {\n    return _.map(this.state.data, (asset, index) => {\n      return (\n        <AssetButton\n          key={asset.id}\n          id={asset.id}\n          src={asset.src}\n          callback={this.callback}\n        />\n      );\n    });\n  }\n\n  render() {\n    const classname = () => {\n      return this.props.show ? styles[\"List\"] + \" show\" : styles[\"List\"];\n    };\n    return (\n      <div className={classname()}>\n        <div className={styles[\"Save\"]}>\n          <button\n            onClick={e => {\n              this.saveAsset();\n            }}\n          >\n            <img src={icons.save} />\n            <p className=\"label\">保存</p>\n          </button>\n        </div>\n        {this.getAssets()}\n      </div>\n    );\n  }\n}\n\nconst AssetButton = ({ id, src, callback }) => {\n  return (\n    <div className={styles[\"ListItem\"]}>\n      <img src={src} />\n      <div className=\"navi\">\n        <button\n          onClick={() => {\n            callback.load(id);\n          }}\n        >\n          <img src={icons.play} />\n          <div className=\"label\">load</div>\n        </button>\n        <button\n          onClick={() => {\n            callback.delete(id);\n          }}\n        >\n          <img src={icons.del} />\n          <div className=\"label\">delete</div>\n        </button>\n      </div>\n    </div>\n  );\n};\n","import React, { Component } from \"react\";\nimport * as _ from \"lodash\";\nimport styles from \"./Header.scss\";\nimport { icons } from \"../../icon/Icons\";\n\nexport const Header = props => {\n  return (\n    <div className={styles[\"Header\"]}>\n      <ul>\n        {_.map(props.menu, val => {\n          return (\n            <HeaderItem\n              id={val.id}\n              icon={icons[val.icon]}\n              label={val.label}\n              callback={val.callback}\n              show={val.show}\n            />\n          );\n        })}\n      </ul>\n    </div>\n  );\n};\n\nexport const HeaderItem = props => {\n  const classname = () => {\n    return props.show ? styles[\"HeaderItem\"] + \" show\" : styles[\"HeaderItem\"];\n  };\n  return (\n    <li\n      className={classname()}\n      onClick={e => {\n        props.callback(e, props.id);\n      }}\n    >\n      {props.children}\n      <img className=\"icon\" src={props.icon} alt={props.label} />\n      <p className=\"label\">{props.label}</p>\n    </li>\n  );\n};\n","export const assets =[\n  {\n    id: 1,\n    type: \"image\",\n    src: [\"./images/star_01.png\"],\n    tiltFlag: true,\n    anim: [\n      {\n        index: 1,\n        pos: { x: 0, y: 0 },\n        rot: 0,\n        scale: { x: 1, y: 1 },\n        time: 0.0\n      },\n      {\n        index: 2,\n        pos: { x: -100, y: 100 },\n        rot: 360,\n        scale: { x: 1, y: 1 },\n        time: 0.5\n      },\n      {\n        index: 3,\n        pos: { x: -100, y: 200 },\n        rot: 180,\n        scale: { x: 1, y: 1 },\n        time: 1.0\n      },\n      {\n        index: 4,\n        pos: { x: 100, y: 0 },\n        rot: 200,\n        scale: { x: 1, y: 1 },\n        time: 1.5\n      },\n      {\n        index: 5,\n        pos: { x: -100, y: -200 },\n        rot: 360,\n        scale: { x: 1, y: 1 },\n        time: 2.0\n      },\n      {\n        index: 6,\n        pos: { x: 0, y: 100 },\n        rot: 180,\n        scale: { x: 1, y: 1 },\n        time: 2.5\n      },\n      {\n        index: 7,\n        pos: { x: 0, y: 0 },\n        rot: 0,\n        scale: { x: 1, y: 1 },\n        time: 3.0\n      }\n    ]\n  },\n  {\n    id: 2,\n    type: \"ani\",\n    src: [\"./images/arrow_left.png\"],\n    tiltFlag: true,\n    anim: [\n      {\n        index: 1,\n        pos: { x: 0, y: 0 },\n        rot: 0,\n        scale: { x: 1, y: 1 },\n        time: 0.0\n      },\n      {\n        index: 2,\n        pos: { x: 10, y: 0 },\n        rot: 45,\n        scale: { x: 1, y: 1 },\n        time: 0.5\n      },\n      {\n        index: 3,\n        pos: { x: 80, y: 0 },\n        rot: 90,\n        scale: { x: 1, y: 1 },\n        time: 1.0\n      },\n      {\n        index: 4,\n        pos: { x: 90, y: 0 },\n        rot: 95,\n        scale: { x: 1, y: 1 },\n        time: 1.5\n      }\n    ]\n  },\n  {\n    id: 3,\n    type: \"ani\",\n    src: [\"./images/arrow_left.png\"],\n    tiltFlag: false,\n    anim: [\n      {\n        index: 1,\n        pos: { x: 0, y: 0 },\n        rot: 0,\n        scale: { x: 1, y: 1 },\n        time: 0.0\n      }\n    ]\n  }\n];","//原点補正\nexport const shiftBase = (b, p) => {\n  return { x: (p.x - b.x).toFixed(2), y: (p.y - b.y).toFixed(2) };\n};\n//ベクトル長さ\nexport const vectorLength = p => {\n  return Math.sqrt(p.x * p.x + p.y * p.y);\n  //return Math.pow( ( v.x * v.x ) + ( v.y * v.y ), 0.5 );\n};\n//内積\nexport const dotProduct = (a, b) => {\n  return a.x * b.x + a.y * b.y;\n};\n\n//外積\nexport const crossProduct = (p, v) => {\n  return p.x * v.y - v.x * p.y;\n};\n\n//ベクトルのなす角(ラジアン)\nexport const theta = (a, b) => {\n  const _a = vectorLength(a);\n  const _b = vectorLength(b);\n  return Math.cos(dotProduct(a, b) / (_a * _b));\n};\n\n//ベクトル座標 座標,ベクトル\nexport const vecPos = (p, v) => {\n  return { x: p.x / v, y: p.y * v };\n};\n//２点間の距離\nexport const distance = (p1, p2) => {\n  return Math.sqrt(Math.pow(p1.x - p2.x, 2) + Math.pow(p1.y - p2.y, 2));\n};\n\n//原点(0,0)からx軸の傾き\nexport const tilt = p => {\n  return p.x / vectorLength(p);\n};\n","import * as vector from './vector.js';\n\nconst Ry = 50 / 0.5; //y軸の最大回転角度 / 最大割合\nconst Rx = 30 / 0.5; //x軸の最大回転角度 / 最大割合\n\nexport const z = (begin, end) => {\n  //原点をbeginとして補正\n  const _begin = { x: 0, y: 0 };\n  const _end = vector.shiftBase(begin, end);\n  //なす角\n  const _crossProduct = vector.crossProduct(_end, { x: 100, y: 0 });\n  let radian = Math.acos(vector.tilt(_end));\n  let deg = radian * (180 / Math.PI);\n  return _crossProduct < 0 ? radian : -deg * (Math.PI / 180);\n};\n\nexport const y = (begin, end, center) => {\n  //原点をbeginとして補正\n  const _begin = { x: 0, y: 0 };\n  const _end = vector.shiftBase(begin, end);\n  const _center = vector.shiftBase(begin, center);\n\n  //外積\n  //begin-end線上の点までの距離\n  const _crossProduct = vector.crossProduct(_end, _center);\n  const distanceFromEdge = Math.abs(\n    _crossProduct / vector.distance(_begin, _end)\n  );\n\n  //begin-centerベクトル量\n  const _edgeOfBeginCenter = vector.distance(_begin, _center);\n\n  //begin-end上の頂点（三平方の定理）\n  const _edge = Math.sqrt(\n    _edgeOfBeginCenter * _edgeOfBeginCenter -\n      distanceFromEdge * distanceFromEdge\n  );\n\n  //begin-end間の距離\n  const vec_length = vector.distance(_begin, _end);\n  const rate = _edge / vec_length - 0.5;\n\n  //角度に変換\n  const r = rate * Ry;\n\n  return `${r}`;\n};\n\nexport const x = (begin, end, center) => {\n  //原点をbeginとして補正\n  const _begin = { x: 0, y: 0 };\n  const _end = vector.shiftBase(begin, end);\n  const _center = vector.shiftBase(begin, center);\n\n  //外積\n  //begin-end線上の点までの距離\n  const _crossProduct = vector.crossProduct(_end, _center);\n  const distanceFromEdge = Math.abs(\n    _crossProduct / vector.distance(_begin, _end)\n  );\n\n  const vec_length = vector.distance(_begin, _end);\n  const rate = distanceFromEdge / vec_length;\n\n  const r = rate * 110;\n\n  return r;\n};\n\nexport const vec3 = (begin, end, center) => {\n  //原点をbeginとして補正\n  const _begin = { x: 0, y: 0 };\n  const _end = vector.shiftBase(begin, end);\n  const _center = vector.shiftBase(begin, center);\n\n  //なす角\n  //z\n  const _crossProduct = vector.crossProduct(_end, { x: 100, y: 0 });\n  let radian = Math.acos(vector.tilt(_end));\n  let deg = radian * (180 / Math.PI);\n  const z = _crossProduct < 0 ? -deg : deg;\n\n  //外積\n  //begin-end線上の点までの距離\n  const _crossProduct2 = vector.crossProduct(_end, _center);\n  const distanceFromEdge = Math.abs(\n    _crossProduct2 / vector.distance(_begin, _end)\n  );\n\n  //begin-centerベクトル量\n  const _edgeOfBeginCenter = vector.distance(_begin, _center);\n\n  //begin-end上の頂点（三平方の定理）\n  const _edge = Math.sqrt(\n    _edgeOfBeginCenter * _edgeOfBeginCenter -\n      distanceFromEdge * distanceFromEdge\n  );\n\n  //begin-end間の距離\n  const vec_length = vector.distance(_begin, _end);\n  const yrate = _edge / vec_length - 0.5;\n\n  //角度に変換\n  //y\n  const y = yrate * Ry;\n\n  //x\n  const xrate = distanceFromEdge / vec_length;\n  const x = xrate * 110;\n\n  return {\n    x: x,\n    y: y,\n    z: z\n  };\n};\n","export const lowpath = (prev, next) => {\n  return {\n    x: prev.x * 0.8 + next.x * 0.2,\n    y: prev.y * 0.8 + next.y * 0.2\n  };\n};\n","import * as _ from 'lodash';\nimport math from 'mathjs';\nimport * as vector from './vector';\n\n/**\n * グローバル座標から2点間の位置割合に変換\n * @param {object} myPoint\n * @param {object} begin\n * @param {oebject} end\n */\nexport const initPointRate = (myPoint, begin, end) => {\n  //原点をbeginとして補正\n  const _begin = { x: 0, y: 0 };\n  const _end = vector.shiftBase(begin, end);\n  const _myPoint = vector.shiftBase(begin, myPoint.vector);\n\n  //外積\n  const _crossProduct = vector.crossProduct(_end, _myPoint);\n  const distanceFromEdge = Math.abs(\n    _crossProduct / vector.distance(_begin, _end)\n  ); //頂点から|begin|endへの距離\n\n  //内積\n  const _dotProduct = vector.dotProduct(_end, _myPoint); // _dotProduct<0 -> 正\n  const cos_theta = vector.theta(_end, _myPoint);\n  const _theta = math.acos(cos_theta); //θ\n  const dotDistance = _theta * vector.vectorLength(_myPoint); //内積 -> 絶対値なので正負の判定を入れる必要がある\n\n  //割合\n  const vec_length = vector.distance(_begin, _end);\n  const rate_vec_point = dotDistance / vec_length; //正しい\n  const rate_from_edge = distanceFromEdge / vec_length;\n\n  //初期値を設定\n  let point = {};\n  point.bool = {\n    dot: _dotProduct < 0 ? false : true,\n    cross: _crossProduct < 0 ? true : false\n  };\n  point.rate = {\n    dot: _dotProduct < 0 ? -rate_vec_point : rate_vec_point,\n    cross: rate_from_edge\n  };\n  return point;\n};\n","import React, { Component } from 'react';\nimport * as _ from 'lodash';\nimport math from 'mathjs';\nimport { VIDEO_SIZE } from '../config';\nimport * as vector from '../util/vector';\nimport * as Tilt from '../util/tilt';\nimport * as Filter from '../util/filter';\nimport { initPointRate } from '../util/initPointRate';\nimport { setPoint } from '../canvas.point';\nimport styles from './VideoCanvas.scss';\n\nexport class Canvas2DView extends Component {\n  constructor(props) {\n    super(props);\n    this.canvas = null;\n    this.tilt = {\n      x: null,\n      y: null,\n      z: null\n    };\n    this.deg = null;\n    this.radian = null;\n    this.star = null;\n\n    //検出対象のパーツ番号\n    this.BASE_PARTS = this.props.partsConfig.base;\n    this.VECTOR_PARTS = this.props.partsConfig.vector;\n    this.CENTER_PARTS = this.props.partsConfig.center;\n\n    //ローパスフィルタ用\n    this.positions = Array.apply(null, new Array(68));\n    this.positions[this.VECTOR_PARTS] = { x: 0, y: 0 };\n    this.positions[this.BASE_PARTS] = { x: 0, y: 0 };\n    this.positions[this.CENTER_PARTS] = { x: 0, y: 0 };\n\n    this.state = {\n      assetId: 1,\n      points: [\n        {\n          rate: {\n            dot: 0.5,\n            cross: 0\n          },\n          bool: {\n            dot: true,\n            cross: false\n          }\n        }\n      ]\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    //ロードされたデータ\n    if (\n      JSON.stringify(nextProps.loadData) !== JSON.stringify(this.props.loadData)\n    ) {\n      this.setState({\n        assetId: nextProps.loadData.assetId\n      });\n    }\n\n    if (nextProps.landmarks) {\n      this.clearCanvas();\n\n      //ローパス\n      if (this.props.positions) {\n        this.positions[this.VECTOR_PARTS] = Filter.lowpath(\n          this.props.positions[this.VECTOR_PARTS],\n          nextProps.positions[this.VECTOR_PARTS]\n        );\n        this.positions[this.BASE_PARTS] = Filter.lowpath(\n          this.props.positions[this.BASE_PARTS],\n          nextProps.positions[this.BASE_PARTS]\n        );\n      } else {\n        //通常\n        this.positions[this.VECTOR_PARTS] =\n          nextProps.positions[this.VECTOR_PARTS];\n        this.positions[this.BASE_PARTS] = nextProps.positions[this.BASE_PARTS];\n      }\n\n      this.tilt = Tilt.z(\n        this.positions[this.VECTOR_PARTS],\n        this.positions[this.BASE_PARTS]\n      );\n\n      if (this.props.showEyes || this.props.editMode) this.drawPoints();\n      if (this.props.showPoints) this.drawParts();\n      if (this.state.points.length) {\n        _.each(this.state.points, (point, index) => {\n          console.log('point =  ', point);\n          this.setPoint(\n            point,\n            index,\n            this.positions[this.BASE_PARTS],\n            this.positions[this.VECTOR_PARTS]\n          );\n        });\n      }\n    }\n  }\n\n  setCanvas(ref) {\n    this.canvas = ref;\n    this.props.setRef(ref);\n  }\n\n  //ポイントを追加\n  addPoint(e) {\n    var rect = this.canvas.getBoundingClientRect();\n    const x = e.clientX - rect.left;\n    const y = e.clientY - rect.top;\n    const rate = initPointRate(\n      { vector: { x: x, y: y } },\n      this.positions[this.BASE_PARTS],\n      this.positions[this.VECTOR_PARTS]\n    );\n    console.log('rate =  ', rate);\n    rate.assetId = this.state.assetId;\n    this.props.editCallback(rate);\n    let points = this.state.points;\n    points[0] = rate;\n    this.setState({\n      points: points\n    });\n  }\n\n  //描画\n  setPoint(myPoint, index, begin, end) {\n    //原点をbeginとして補正\n    const _begin = { x: 0, y: 0 };\n    const _end = vector.shiftBase(begin, end);\n    //ベクトル\n    const _end_vec = vector.vectorLength(_end);\n    //begin-end間の距離\n    const vec_length = vector.distance(_begin, _end);\n    //begin-end線上の投影座標\n    const point_distance = vec_length * myPoint.rate.dot;\n\n    //中心座標\n    const vec = {\n      x: _begin.x + (_end.x / _end_vec) * point_distance + begin.x,\n      y: _begin.y + (_end.y / _end_vec) * point_distance + begin.y\n    };\n\n    //画像描画\n    const asset = _.filter(this.props.anies, asset => {\n      return asset.id == this.state.assetId;\n    });\n    if (asset.length) {\n      const img = asset[0].sprite.img;\n      let _x = vec.x - img.width / 2;\n      let _y = vec.y - img.height / 2;\n      asset[0].sprite\n        .setCanvas(this.canvas)\n        .transform({ x: _x, y: _y }, this.tilt, -this.tilt);\n    }\n\n    if (this.props.editMode) {\n      setPoint(this.canvas, { x: vec.x, y: vec.y }, `rgba(255,255,255)`);\n    }\n  }\n\n  //キャンバスをクリア\n  clearCanvas() {\n    const context = this.canvas.getContext('2d');\n    context.clearRect(0, 0, VIDEO_SIZE.width, VIDEO_SIZE.height);\n  }\n\n  //ベースパーツを描画\n  drawPoints() {\n    let index = 0;\n    _.each(this.props.positions, point => {\n      if (index == this.BASE_PARTS) {\n        setPoint(this.canvas, { x: point.x, y: point.y }, `rgba(255,0,0)`);\n      }\n      if (index == this.VECTOR_PARTS) {\n        setPoint(this.canvas, { x: point.x, y: point.y }, `rgba(0,255,0)`);\n      }\n      index++;\n    });\n  }\n\n  //検出したパーツ\n  drawParts() {\n    let landmarks = this.props.landmarks;\n    // パーツごとに色分け\n    const getColor = (col, index) => {\n      let cols = [\n        `rgb(255,${index},${index})`,\n        `rgb(${index},255,${index})`,\n        `rgb(${index},${index},255)`,\n        `rgb(255,255,${index})`, //左目\n        `rgb(${index},255,255)`, //右目\n        `rgb(255,${index},255)`,\n        `rgb(${index},${index},${index})`\n      ];\n      return cols[col];\n    };\n\n    let col = 0; //パーツインデックス\n    let index = 0; //パーツ内インデックス\n    let step = Math.floor(255 / 10); //色の段階\n    _.each(landmarks, (parts, key) => {\n      col++;\n      index = 0;\n      parts.map(point => {\n        index++;\n        setPoint(\n          this.canvas,\n          { x: point.x, y: point.y },\n          getColor(col, index * step)\n        );\n      });\n    });\n  }\n\n  render() {\n    return (\n      <div className={styles['viewerCanvas']}>\n        <canvas\n          ref={ref => {\n            this.setCanvas(ref);\n          }}\n          width={VIDEO_SIZE.width}\n          height={VIDEO_SIZE.height}\n          className={styles['overlayCanvas']}\n          onClick={e => {\n            if (this.props.editable) this.addPoint(e);\n          }}\n        />\n      </div>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport * as THREE from 'three';\nimport styles from '../VideoCanvas.scss';\nimport * as Tilt from '../../util/tilt';\nimport * as Filter from '../../util/filter';\nimport * as vector from '../../util/vector';\n\nclass faceGroup extends THREE.Group {\n  constructor() {\n    super();\n    const geometry = new THREE.CubeGeometry(40, 10, 5);\n    const material = new THREE.MeshLambertMaterial({ color: 0xfbbc05 });\n    const mesh = new THREE.Mesh(geometry, material);\n    mesh.position.set(0, 0, 10);\n    this.add(mesh);\n  }\n}\n\nexport class Web3DView extends Component {\n  constructor(props) {\n    super(props);\n\n    //回転\n    this.positions = [];\n    this.positions[this.VECTOR_PARTS] = { x: 0, y: 0 };\n    this.positions[this.BASE_PARTS] = { x: 0, y: 0 };\n    this.positions[this.CENTER_PARTS] = { x: 0, y: 0 };\n\n    this.tilt = {};\n    this.shift = {\n      x: -60,\n      y: 0,\n      z: 0\n    };\n    this.axis = {\n      x: new THREE.Vector3(1, 0, 0).normalize(),\n      y: new THREE.Vector3(0, 1, 0).normalize(),\n      z: new THREE.Vector3(0, 0, 1).normalize()\n    };\n    this.quat = {\n      x: new THREE.Quaternion(),\n      y: new THREE.Quaternion(),\n      z: new THREE.Quaternion()\n    };\n\n    this.transScale = {\n      x: 0.15,\n      y: 1,\n      z: 1\n    };\n\n    //検出対象のパーツ番号\n    this.BASE_PARTS = this.props.partsConfig.base;\n    this.VECTOR_PARTS = this.props.partsConfig.vector;\n    this.CENTER_PARTS = this.props.partsConfig.center;\n\n    //3D\n    this.width = this.props.size.width;\n    this.height = this.props.size.height;\n    this.canvas = null;\n    this.renderer = null;\n    this.scene = null;\n    this.light = null;\n    this.persecamera = null;\n    this.camera = null;\n    this.controls = null;\n    this.group = null;\n    this.object = null;\n    this.q = null;\n  }\n\n  componentDidMount() {\n    this.init();\n    this.camera.aspect = this.props.size.width / this.props.size.height;\n    this.camera.updateProjectionMatrix();\n    this.render3D();\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.landmarks) {\n      this.positions = this.lowPathFilter(nextProps);\n      this.tilt = Tilt.vec3(\n        this.positions[this.VECTOR_PARTS],\n        this.positions[this.BASE_PARTS],\n        this.positions[this.CENTER_PARTS]\n      );\n    }\n  }\n\n  lowPathFilter(nextProps) {\n    let positions = {};\n    //ローパス\n    if (this.props.positions) {\n      positions[this.VECTOR_PARTS] = Filter.lowpath(\n        this.props.positions[this.VECTOR_PARTS],\n        nextProps.positions[this.VECTOR_PARTS]\n      );\n      positions[this.BASE_PARTS] = Filter.lowpath(\n        this.props.positions[this.BASE_PARTS],\n        nextProps.positions[this.BASE_PARTS]\n      );\n      positions[this.CENTER_PARTS] = Filter.lowpath(\n        this.props.positions[this.CENTER_PARTS],\n        nextProps.positions[this.CENTER_PARTS]\n      );\n    } else {\n      //通常\n      positions[this.VECTOR_PARTS] = nextProps.positions[this.VECTOR_PARTS];\n      positions[this.BASE_PARTS] = nextProps.positions[this.BASE_PARTS];\n      positions[this.CENTER_PARTS] = nextProps.positions[this.CENTER_PARTS];\n    }\n    return positions;\n  }\n\n  init() {\n    // renderer\n    this.renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });\n    this.renderer.setPixelRatio(window.devicePixelRatio || 1);\n    this.renderer.setSize(this.width, this.height);\n    this.canvas.appendChild(this.renderer.domElement);\n\n    // scene\n    this.scene = new THREE.Scene();\n\n    // lights\n    this.light = new THREE.DirectionalLight(0xffffcc, 1);\n    this.light.position.set(0, 100, 30);\n    this.scene.add(this.light);\n    const ambientLight = new THREE.AmbientLight(0xffaa55);\n    this.scene.add(ambientLight);\n\n    // camera\n    const perscamera = new THREE.PerspectiveCamera(\n      45,\n      this.width / this.height,\n      1,\n      10000\n    ); // fov(視野角),aspect,near,far\n    this.camera = perscamera;\n    this.camera.position.set(0, 0, 100);\n    this.camera.lookAt(this.scene.position);\n\n    //helper\n    // const axisHelper = new THREE.AxisHelper(200, 50);\n    // this.scene.add(axisHelper);\n\n    //group\n    this.group = new faceGroup();\n    this.group.useQuaternion = true;\n    this.scene.add(this.group);\n\n    //\n    this.q = new THREE.Quaternion();\n  }\n\n  quote() {\n    this.quat.x.setFromAxisAngle(\n      this.axis.x,\n      THREE.Math.degToRad(-this.tilt.x + 70)\n    );\n    this.quat.y.setFromAxisAngle(this.axis.y, THREE.Math.degToRad(this.tilt.y));\n    this.quat.z.setFromAxisAngle(this.axis.z, THREE.Math.degToRad(this.tilt.z));\n    this.quat.y.multiply(this.quat.x);\n    this.quat.z.multiply(this.quat.y);\n    this.group.quaternion.copy(this.quat.z);\n  }\n\n  translation() {\n    if (!this.positions[this.BASE_PARTS] || !this.positions[this.VECTOR_PARTS])\n      return;\n    //原点をbeginとして補正\n    const begin = this.positions[this.BASE_PARTS];\n    const end = this.positions[this.VECTOR_PARTS];\n    const _begin = { x: 0, y: 0 };\n    const _end = vector.shiftBase(begin, end);\n    const _end_vec = vector.vectorLength(_end);\n    const vec_length = vector.distance(_begin, _end);\n    const point_distance = vec_length * 0.5;\n    const vec = {\n      x: _begin.x + (_end.x / _end_vec) * point_distance + begin.x,\n      y: _begin.y + (_end.y / _end_vec) * point_distance + begin.y\n    };\n\n    const center_position = {\n      x: this.props.size.width / 2,\n      y: this.props.size.height / 2\n    };\n\n    const pos = {\n      x: (vec.x - center_position.x) * this.transScale.x,\n      y: 0 * this.transScale.y,\n      z: 0 * this.transScale.z\n    };\n\n    this.group.position.set(pos.x, pos.y, pos.z);\n  }\n\n  render3D() {\n    window.requestAnimationFrame(() => {\n      this.quote();\n      this.translation();\n      this.render3D();\n    });\n    this.renderer.render(this.scene, this.camera);\n  }\n\n  render() {\n    return (\n      <div\n        ref={ref => {\n          this.canvas = ref;\n        }}\n        className={styles['overlayWeb3D']}\n      />\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport * as THREE from 'three';\nimport styles from '../VideoCanvas.scss';\nimport * as Tilt from '../../util/tilt';\nimport * as Filter from '../../util/filter';\nimport * as vector from '../../util/vector';\n\nclass faceGroup extends THREE.Group {\n  constructor() {\n    super();\n    const geometry = new THREE.CubeGeometry(40, 10, 5);\n    const material = new THREE.MeshLambertMaterial({ color: 0xfbbc05 });\n    const mesh = new THREE.Mesh(geometry, material);\n    mesh.position.set(0, 0, 10);\n    this.add(mesh);\n  }\n}\n\nexport class Web3D extends Component {\n  constructor(props) {\n    super(props);\n\n    //回転\n    this.positions = [];\n    this.positions[this.VECTOR_PARTS] = { x: 0, y: 0 };\n    this.positions[this.BASE_PARTS] = { x: 0, y: 0 };\n    this.positions[this.CENTER_PARTS] = { x: 0, y: 0 };\n\n    this.tilt = {};\n    this.shift = {\n      x: -60,\n      y: 0,\n      z: 0\n    };\n\n    this.axis = {\n      x: new THREE.Vector3(1, 0, 0).normalize(),\n      y: new THREE.Vector3(0, 1, 0).normalize(),\n      z: new THREE.Vector3(0, 0, 1).normalize()\n    };\n\n    this.transScale = {\n      x: 0.15,\n      y: 0.13,\n      z: 1\n    };\n\n    //検出対象のパーツ番号\n    this.BASE_PARTS = this.props.partsConfig.base;\n    this.VECTOR_PARTS = this.props.partsConfig.vector;\n    this.CENTER_PARTS = this.props.partsConfig.center;\n\n    this.state = {\n      position: {},\n      scale: 1,\n      quat: {\n        x: new THREE.Quaternion(),\n        y: new THREE.Quaternion(),\n        z: new THREE.Quaternion()\n      }\n    };\n  }\n\n  componentDidMount() {}\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.landmarks) {\n      this.positions = this.lowPathFilter(nextProps);\n      this.tilt = Tilt.vec3(\n        this.positions[this.VECTOR_PARTS],\n        this.positions[this.BASE_PARTS],\n        this.positions[this.CENTER_PARTS]\n      );\n\n      this.quote();\n      this.translation();\n    }\n  }\n\n  lowPathFilter(nextProps) {\n    let positions = {};\n    //ローパス\n    if (this.props.positions) {\n      positions[this.VECTOR_PARTS] = Filter.lowpath(\n        this.props.positions[this.VECTOR_PARTS],\n        nextProps.positions[this.VECTOR_PARTS]\n      );\n      positions[this.BASE_PARTS] = Filter.lowpath(\n        this.props.positions[this.BASE_PARTS],\n        nextProps.positions[this.BASE_PARTS]\n      );\n      positions[this.CENTER_PARTS] = Filter.lowpath(\n        this.props.positions[this.CENTER_PARTS],\n        nextProps.positions[this.CENTER_PARTS]\n      );\n    } else {\n      //通常\n      positions[this.VECTOR_PARTS] = nextProps.positions[this.VECTOR_PARTS];\n      positions[this.BASE_PARTS] = nextProps.positions[this.BASE_PARTS];\n      positions[this.CENTER_PARTS] = nextProps.positions[this.CENTER_PARTS];\n    }\n    return positions;\n  }\n\n  quote() {\n    let quat = {\n      x: new THREE.Quaternion(),\n      y: new THREE.Quaternion(),\n      z: new THREE.Quaternion()\n    };\n    quat.x.setFromAxisAngle(\n      this.axis.x,\n      THREE.Math.degToRad(-this.tilt.x + 70)\n    );\n    quat.y.setFromAxisAngle(this.axis.y, THREE.Math.degToRad(this.tilt.y));\n    quat.z.setFromAxisAngle(this.axis.z, THREE.Math.degToRad(this.tilt.z));\n    quat.y.multiply(quat.x);\n    quat.z.multiply(quat.y);\n    this.setState({\n      quat: quat\n    });\n  }\n\n  translation() {\n    if (!this.positions[this.BASE_PARTS] || !this.positions[this.VECTOR_PARTS])\n      return;\n\n    //原点をbeginとして補正\n    const begin = this.positions[this.BASE_PARTS];\n    const end = this.positions[this.VECTOR_PARTS];\n    const _begin = { x: 0, y: 0 };\n    const _end = vector.shiftBase(begin, end);\n    const _end_vec = vector.vectorLength(_end);\n    const vec_length = vector.distance(_begin, _end);\n\n    const point_distance = vec_length * 0.5;\n    const vec = {\n      x: _begin.x + (_end.x / _end_vec) * point_distance + begin.x,\n      y: _begin.y + (_end.y / _end_vec) * point_distance + begin.y\n    };\n\n    const center_position = {\n      x: this.props.size.width / 2,\n      y: this.props.size.height / 2\n    };\n\n    const scale = vec_length / 100;\n    // console.log('scale ', scale);\n\n    const pos = {\n      x: (vec.x - center_position.x) * this.transScale.x,\n      y: (center_position.y - vec.y) * this.transScale.y,\n      z: 0 * this.transScale.z\n    };\n\n    this.setState({\n      position: pos,\n      scale: scale\n    });\n  }\n\n  render() {\n    return this.props.scene(\n      this.state.position,\n      this.state.quat,\n      this.state.scale\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport * as _ from 'lodash';\nimport * as THREE from 'three';\nimport MTLLoader from 'three-mtl-loader';\nimport * as OBJLoader from 'three-obj-loader';\nimport { location } from '../../../config';\nimport styles from '../../VideoCanvas.scss';\n\nOBJLoader(THREE);\n\nclass faceGroup extends THREE.Group {\n  constructor() {\n    super();\n    const geometry = new THREE.CubeGeometry(40, 10, 5);\n    const material = new THREE.MeshLambertMaterial({ color: 0xfbbc05 });\n    const mesh = new THREE.Mesh(geometry, material);\n    mesh.position.set(0, 0, 10);\n    this.add(mesh);\n  }\n}\n\nexport class ObjLoader extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      model: null\n    };\n  }\n\n  async componentDidMount() {\n    let model = await this.load();\n    this.setState({\n      model: model\n    });\n  }\n\n  render() {\n    return this.props.loaded(this.state.model);\n  }\n\n  async loadMatrial(mtl) {\n    return new Promise((resolved, rejected) => {\n      const loader = new MTLLoader();\n      loader.load(\n        mtl,\n        val => {\n          resolved(val);\n        },\n        progress => {},\n        error => {\n          rejected(error);\n        }\n      );\n    });\n  }\n\n  async loadModel(obj) {\n    return new Promise((resolved, rejected) => {\n      this.THREE = THREE;\n      const loader = new this.THREE.OBJLoader();\n      loader.load(\n        obj,\n        val => {\n          resolved(val);\n        },\n        progress => {},\n        error => {\n          rejected(error);\n        }\n      );\n    });\n  }\n\n  async loadTexture(tex) {\n    return new Promise((resolved, rejected) => {\n      this.THREE = THREE;\n      const loader = new this.THREE.TextureLoader();\n      loader.load(\n        tex,\n        val => {\n          resolved(val);\n        },\n        progress => {},\n        error => {\n          rejected(error);\n        }\n      );\n    });\n  }\n\n  async load() {\n    if (!this.props.model) return;\n    let promise = new Promise(async resolved => {\n      let material = await this.loadMatrial(this.props.model.mtl);\n      let model = await this.loadModel(this.props.model.obj);\n      let texture = await this.loadTexture(this.props.model.tex);\n      if (material && model && texture) {\n        model.traverse(child => {\n          if (child instanceof THREE.Mesh) {\n            child.material.map = texture;\n          }\n        });\n        resolved(model);\n      }\n    });\n    return promise;\n  }\n}\n\nexport class Scene extends Component {\n  constructor(props) {\n    super(props);\n\n    //検出対象のパーツ番号\n    this.BASE_PARTS = this.props.partsConfig.base;\n    this.VECTOR_PARTS = this.props.partsConfig.vector;\n    this.CENTER_PARTS = this.props.partsConfig.center;\n\n    //回転\n    this.positions = [];\n    this.positions[this.VECTOR_PARTS] = { x: 0, y: 0 };\n    this.positions[this.BASE_PARTS] = { x: 0, y: 0 };\n    this.positions[this.CENTER_PARTS] = { x: 0, y: 0 };\n\n    this.tilt = {};\n    this.shift = {\n      x: -60,\n      y: 0,\n      z: 0\n    };\n    this.axis = {\n      x: new THREE.Vector3(1, 0, 0).normalize(),\n      y: new THREE.Vector3(0, 1, 0).normalize(),\n      z: new THREE.Vector3(0, 0, 1).normalize()\n    };\n    this.quat = {\n      x: new THREE.Quaternion(),\n      y: new THREE.Quaternion(),\n      z: new THREE.Quaternion()\n    };\n\n    this.transScale = {\n      x: 0.15,\n      y: 1,\n      z: 1\n    };\n\n    //3D\n    this.width = this.props.size.width;\n    this.height = this.props.size.height;\n    this.canvas = null;\n    this.renderer = null;\n    this.scene = null;\n    this.light = null;\n    this.persecamera = null;\n    this.camera = null;\n    this.controls = null;\n    this.group = null;\n    this.object = null;\n    this.q = null;\n  }\n\n  componentDidMount() {\n    this.init();\n    this.camera.aspect = this.props.size.width / this.props.size.height;\n    this.camera.updateProjectionMatrix();\n    this.render3D();\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (\n      JSON.stringify(nextProps.position) !== JSON.stringify(this.props.position)\n    ) {\n      this.group.position.set(\n        nextProps.position.x,\n        nextProps.position.y,\n        nextProps.position.z\n      );\n    }\n\n    if (JSON.stringify(nextProps.quat) !== JSON.stringify(this.props.quat)) {\n      this.group.quaternion.copy(nextProps.quat.z);\n    }\n\n    if (JSON.stringify(nextProps.scale) !== JSON.stringify(this.props.scale)) {\n      this.group.scale.set(nextProps.scale, nextProps.scale, nextProps.scale);\n    }\n\n    if (JSON.stringify(nextProps.model) !== JSON.stringify(this.props.model)) {\n      console.log('Add group =', nextProps.model);\n      this.group.add(nextProps.model);\n    }\n  }\n\n  init() {\n    // renderer\n    this.renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });\n    this.renderer.setPixelRatio(window.devicePixelRatio || 1);\n    this.renderer.setSize(this.width, this.height);\n    this.canvas.appendChild(this.renderer.domElement);\n\n    // scene\n    this.scene = new THREE.Scene();\n\n    // lights\n    this.light = new THREE.DirectionalLight(0xffffcc, 1);\n    this.light.position.set(0, 100, 30);\n    this.scene.add(this.light);\n    const ambientLight = new THREE.AmbientLight(0xffaa55);\n    this.scene.add(ambientLight);\n\n    // camera\n    const perscamera = new THREE.PerspectiveCamera(\n      45,\n      this.width / this.height,\n      1,\n      10000\n    ); // fov(視野角),aspect,near,far\n    this.camera = perscamera;\n    this.camera.position.set(0, 0, 100);\n    this.camera.lookAt(this.scene.position);\n\n    //group\n    this.group = new faceGroup();\n    this.group.useQuaternion = true;\n    this.scene.add(this.group);\n\n    //\n    this.q = new THREE.Quaternion();\n  }\n\n  render3D() {\n    window.requestAnimationFrame(() => {\n      this.render3D();\n    });\n    this.renderer.render(this.scene, this.camera);\n  }\n\n  render() {\n    return (\n      <div\n        ref={ref => {\n          this.canvas = ref;\n        }}\n        className={styles['overlayWeb3D']}\n      />\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport { Scene, ObjLoader } from './Scene';\nimport { location } from '../../../config';\n\nconst model_url = {\n  mtl: `${location}/3dmodels/chest/mj_chest01.mtl`,\n  obj: `${location}/3dmodels/chest/mj_chest01.obj`,\n  tex: `${location}/3dmodels/chest/img_o_mj_chest01.png`\n};\n\nexport class Glasses extends Component {\n  render() {\n    return (\n      <div>\n        <ObjLoader\n          model={null}\n          loaded={model => {\n            // console.log('model  ', model);\n            return <Scene {...this.props} model={model} />;\n          }}\n        />\n      </div>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport * as faceapi from 'face-api.js/dist/face-api.js';\nimport * as _ from 'lodash';\nimport { FaceDetect } from './components/FaceDetect';\nimport { VideoImage } from './components/VideoCanvas';\nimport { getLandmarks } from './canvas.point';\nimport { VIDEO_SIZE, INTERVAL, PARTS_INDEX } from './config';\nimport AssetLoader from './components/AssetLoader';\nimport AssetsSelectMenu from './components/AssetsSelectMenu/AssetsSelectMenu';\nimport StampManager from './components/StampManager/StampManager';\nimport { aniSprite } from './components/ani';\nimport { scheduleDelegate } from './components/scheduleDelegate';\nimport styles from './App.scss';\nimport { Header, HeaderItem } from './components/Header/Header';\nimport { icons } from './icon/Icons';\nimport { assets } from './assets/assets.js';\n\nimport { Canvas2DView } from './components/Canvas2DView';\nimport { Web3DView } from './components/Web3DView/Web3DView';\nimport { Web3D } from './components/Web3DView/Web3D';\nimport { Glasses } from './components/Web3DView/Scenes/Model';\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      assets: assets,\n      video: null,\n      canvas: null,\n      overlay: null,\n      result: null,\n      landmarks: null,\n      positions: null,\n      anies: [],\n      editMenu: false, //アセットの表示非表示\n      stampMenu: false, //スタンプの表示非表示\n      tilt: {}, //3DViewで回転を抽出\n      data: {\n        //ロードするスタンプ\n        assetId: 1,\n        rate: {},\n        bool: {}\n      }\n    };\n\n    this.partsConfig = {\n      base: PARTS_INDEX.leftEye,\n      vector: PARTS_INDEX.rightEye\n    };\n\n    this.partsConfig3D = {\n      base: PARTS_INDEX.leftEye,\n      vector: PARTS_INDEX.rightEye,\n      center: PARTS_INDEX.nose\n    };\n\n    this.callback = {\n      edit: () => {},\n      assets: () => {\n        this.setState({ editMenu: !this.state.editMenu });\n      },\n      stamps: () => {\n        this.setState({ stampMenu: !this.state.stampMenu });\n      }\n    };\n\n    this.overlay = null;\n  }\n\n  setCanvas(ref) {\n    if (this.state.canvas !== ref && ref) {\n      this.setState({ canvas: ref });\n    }\n  }\n\n  setVideo(ref) {\n    if (this.state.video !== ref && ref) {\n      this.setState({ video: ref });\n    }\n  }\n\n  setOverlay(ref) {\n    if (this.state.overlay !== ref && ref) {\n      this.setState({ overlay: ref });\n      this.initCanvas();\n    }\n  }\n\n  initCanvas() {\n    if (!this.state.canvas || !this.state.overlay) return;\n    this.setState({\n      width: VIDEO_SIZE.width,\n      height: VIDEO_SIZE.height\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n        <Header\n          menu={[\n            {\n              id: 1,\n              label: 'assets',\n              icon: 'assets',\n              callback: this.callback.assets,\n              show: this.state.editMenu\n            },\n            {\n              id: 2,\n              label: 'stamps',\n              icon: 'stamps',\n              callback: this.callback.stamps,\n              show: this.state.stampMenu\n            }\n          ]}\n        />\n        <div className={styles['viewer']}>\n          <VideoImage\n            size={VIDEO_SIZE}\n            interval={INTERVAL}\n            video={ref => {\n              this.setVideo(ref);\n            }}\n            canvas={ref => {\n              this.setCanvas(ref);\n            }}\n          />\n          <FaceDetect\n            canvas={this.state.canvas}\n            video={this.state.video}\n            interval={INTERVAL}\n            result={result => {\n              const { width, height } = faceapi.getMediaDimensions(\n                this.state.video\n              );\n              const resizedResults = [result].map(res =>\n                res.forSize(width, height)\n              );\n              const landmarks = getLandmarks(resizedResults[0].faceLandmarks);\n              this.setState({\n                landmarks: landmarks,\n                positions: resizedResults[0].landmarks.positions\n              });\n            }}\n          />\n          <AssetLoader\n            assets={this.state.assets}\n            progress={progress => {}}\n            done={() => {}}\n            view={anies => {\n              return (\n                <React.Fragment>\n                  <Canvas2DView\n                    showEyes={false} //眼の点を表示 ediMode=trueの場合はtrue\n                    showPoints={false} //クリック点を表示\n                    multiPoints={false} //複数ポイント作成\n                    editable\n                    editMenu={this.state.editMenu} //編集モード\n                    editCallback={points => {\n                      //アセットを更新\n                      let data = this.state.data;\n                      data.bool = points.bool;\n                      data.rate = points.rate;\n                      data.assetId = points.assetId;\n                      this.setState({ data });\n                    }} //クリック点の座標データ\n                    video={this.state.video} //videoタグ\n                    setRef={ref => {\n                      this.setOverlay(ref);\n                    }} //canvasタグ\n                    partsConfig={this.partsConfig3D} //基準パーツ\n                    landmarks={this.state.landmarks} //検出パーツ\n                    positions={this.state.positions} //描画用の点\n                    anies={anies} //AssetLoaderから返されるアニメーションデータ\n                    loadData={this.state.data} //スタンプデータ\n                  />\n                  <Web3D\n                    size={VIDEO_SIZE}\n                    tilt={this.state.tilt}\n                    positions={this.state.positions} //描画用の点\n                    partsConfig={this.partsConfig3D} //基準パーツ\n                    landmarks={this.state.landmarks} //検出パーツ\n                    scene={(position, quat, scale) => {\n                      return (\n                        <Glasses\n                          size={VIDEO_SIZE}\n                          partsConfig={this.partsConfig3D} //基準パーツ\n                          position={position}\n                          quat={quat}\n                          scale={scale}\n                        />\n                      );\n                    }}\n                  />\n                </React.Fragment>\n              );\n            }}\n          />\n        </div>\n\n        <AssetsSelectMenu\n          show={this.state.editMenu}\n          assets={this.state.assets}\n          callback={id => {\n            let data = _.clone(this.state.data);\n            data.assetId = id;\n            this.setState({ data });\n          }}\n        />\n\n        <StampManager\n          show={this.state.stampMenu}\n          assets={this.state.assets}\n          currentAsset={this.state.data}\n          callback={data => {\n            this.setState({ data });\n          }}\n        />\n      </div>\n    );\n  }\n}\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}